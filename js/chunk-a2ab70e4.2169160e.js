(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2ab70e4"],{3803:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{attrs:{background:"",layout:e.pagerLayout,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})},l=[],n=a("750b"),r={name:"pagination",props:["pager","data","limitNumber"],setup:function(e,t){var a=t.emit,o=Object(n["a"])((function(){return e.data.length>=e.limitNumber?e.pager:"prev, pager, jumper, ->, total, slot"})),l=Object(n["f"])(),r=function(e){l.value=e,a("pagechange",e)};return{pagerLayout:o,currentPage:l,handleCurrentChange:r}}},i=r,s=a("2877"),d=Object(s["a"])(i,o,l,!1,null,null,null);t["a"]=d.exports},"4b3c":function(e,t,a){"use strict";var o=a("6404"),l=a.n(o);l.a},5034:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mt-5"},[a("el-breadcrumb",{staticClass:"border el-breadcrumb-outer",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{staticClass:"mt-3 ml-3"},[e._v("所有商品")]),a("el-breadcrumb-item",{staticClass:"mt-3"},[a("span",{staticStyle:{color:"#f39c12"}},[a("i",{staticClass:"fas fa-warehouse"}),e._v(" 待入库")])]),a("div",{staticClass:"float-right mt-2 mr-3"},[a("el-input",{staticClass:"filter-item searchInputWidth",attrs:{type:"text",placeholder:"搜索","prefix-icon":"el-icon-search",clearable:""},on:{input:e.handleQuery},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1)],1),a("el-table",{staticClass:"borderRadius mt-5",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"_id",label:"货物号",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a._id.substr(-10))+" ")]}}])}),a("el-table-column",{attrs:{prop:"user_id",label:"用户号",align:"center",sortable:""}}),a("el-table-column",{attrs:{prop:"username",label:"会员名称",align:"center",sortable:""}}),a("el-table-column",{attrs:{prop:"goodName",label:"货品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"goodNumber",label:"货品数量",align:"center"}}),a("el-table-column",{attrs:{prop:"localExpressNumber",label:"快递单号",align:"center",sortable:""}}),a("el-table-column",{attrs:{prop:"localExpressCompany",label:"快递公司",align:"center",sortable:""}}),a("el-table-column",{attrs:{label:"更新时间",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("moment")(a.updatedAt,"timezone","Asia/Shanghai","YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("el-table-column",{attrs:{prop:"goodNotes",label:"客户备注",align:"center",sortable:""}}),a("el-table-column",{attrs:{prop:"goodStatus",label:"货物状态",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("span",{staticClass:"text-danger"},[e._v(e._s(o.goodStatus))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleUpdate(o)}}},[e._v(" 入库 ")])]}}])})],1),a("pagination",{staticClass:"mt-5 float-right",attrs:{data:e.tableData,pager:"prev, pager, next, jumper, ->, total, slot",limitNumber:"10"},on:{pagechange:e.pageChange}}),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"货物入库信息",visible:e.switchEditSign,center:"",width:"400px"},on:{"update:visible":function(t){e.switchEditSign=t}}},[a("el-form",{attrs:{model:e.adminHandleForm,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"*货物数量:"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.adminHandleForm.goodNumber,callback:function(t){e.$set(e.adminHandleForm,"goodNumber",t)},expression:"adminHandleForm.goodNumber"}})],1),a("el-form-item",{attrs:{label:"*货物长度 (cm):"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.adminHandleForm.goodSize_length,callback:function(t){e.$set(e.adminHandleForm,"goodSize_length",t)},expression:"adminHandleForm.goodSize_length"}})],1),a("el-form-item",{attrs:{label:"*货物宽度 (cm):"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.adminHandleForm.goodSize_width,callback:function(t){e.$set(e.adminHandleForm,"goodSize_width",t)},expression:"adminHandleForm.goodSize_width"}})],1),a("el-form-item",{attrs:{label:"*货物高度 (cm):"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.adminHandleForm.goodSize_height,callback:function(t){e.$set(e.adminHandleForm,"goodSize_height",t)},expression:"adminHandleForm.goodSize_height"}})],1),a("el-form-item",{attrs:{label:"*货物重量 (kg):"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.adminHandleForm.goodWeight,callback:function(t){e.$set(e.adminHandleForm,"goodWeight",t)},expression:"adminHandleForm.goodWeight"}})],1),a("el-form-item",{attrs:{label:"*货物类型:"}},[a("el-select",{attrs:{autocomplete:"off"},model:{value:e.adminHandleForm.goodType,callback:function(t){e.$set(e.adminHandleForm,"goodType",t)},expression:"adminHandleForm.goodType"}},[a("el-option",{attrs:{label:"粉末货物",value:"0"}}),a("el-option",{attrs:{label:"液体货物",value:"1"}}),a("el-option",{attrs:{label:"食品货物",value:"2"}}),a("el-option",{attrs:{label:"敏感类",value:"3"}}),a("el-option",{attrs:{label:"普通货物",value:"4"}}),a("el-option",{attrs:{label:"体积货物",value:"5"}})],1)],1),a("el-form-item",{attrs:{label:"*货物位置:"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.adminHandleForm.packageLocation,callback:function(t){e.$set(e.adminHandleForm,"packageLocation",t)},expression:"adminHandleForm.packageLocation"}})],1),a("el-form-item",{attrs:{label:"*入库时间:"}},[a("el-date-picker",{attrs:{type:"datetime"},model:{value:e.adminHandleForm.storageTime,callback:function(t){e.$set(e.adminHandleForm,"storageTime",t)},expression:"adminHandleForm.storageTime"}})],1),a("el-form-item",{attrs:{label:"*货物照片:"}},[a("el-upload",{attrs:{drag:"",action:"https://upload-z2.qiniup.com",data:e.token,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"file-list":e.imageUrl,"list-type":"picture"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("拖拽照片 或者 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" *上传照片只支持PNG，GIF，JPEG 和 JPG格式，大小不超过1MB。 ")])])],1),a("el-form-item",{attrs:{label:"货物备注:"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.adminHandleForm.note,callback:function(t){e.$set(e.adminHandleForm,"note",t)},expression:"adminHandleForm.note"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.switchEditSign=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitGoodsInfo}},[e._v("确认")])],1)],1)],1)},l=[],n=(a("c975"),a("750b")),r=a("3803"),i=a("6121"),s={name:"stockpendinglist",components:{pagination:r["a"]},setup:function(e,t){var a=t.root,o=a.$store,l=a.$message;Object(n["d"])((function(){o.dispatch("getAllGoods",{status:"待入库",page:0,size:10}),o.dispatch("getUpToken")}));var r=Object(n["f"])(!1),s=Object(n["c"])("reload"),d=Object(n["f"])(!1),c=Object(n["e"])({_Id:"",goodImg:"",goodSize_width:"",goodSize_height:"",goodSize_length:"",goodWeight:"",goodPaidWeight:0,goodType:"",packageLocation:"",goodNumber:0,storageTime:"",note:"",stockOperator:o.state.userSelf.username}),u=function(e){r.value=!0,c._Id=e._id,c.goodNumber=e.goodNumber},m=Object(n["a"])((function(){return o.state.allGoods})),g=Object(n["e"])([]),p=Object(n["a"])((function(){return o.state.token})),b=function(e){var t=!0,a=["image/gif","image/jpeg","image/jpg","image/png"],o=e.size/1024/1024<1;return-1==a.indexOf(e.type)?(l.error("上传文件应该是图片格式！"),t=!1):o||(l.error("图片大小超过1MB了哦！"),t=!1),t},f=function(e){o.dispatch("getUpToken").then((function(){c.goodImg=e.key,g.value.push(i["a"]+e.key)})).catch((function(){}))},h=Object(n["a"])((function(){var e=[];return e=""!=v.value?_.value:m.value,e})),v=Object(n["f"])(""),_=Object(n["f"])([]),k=function(){var e={keyword:{searchString:v.value},status:"待入库",page:"0",size:"10"};o.dispatch("searchGoods",e).then((function(e){_.value=e.data})).catch((function(){}))},S=function(){if(""==c._Id||""==c.goodImg||""==c.goodSize_width||""==c.goodSize_height||""==c.goodSize_length||""==c.goodWeight||""==c.goodType||""==c.packageLocation||""==c.storageTime||""==c.goodNumber)l.error("请填写完整货物信息");else{var e=Math.round(c.goodSize_width*c.goodSize_height*c.goodSize_length/5e3),t=c.goodWeight>e?c.goodWeight:e;c.goodPaidWeight=t,r.value=!1,d.value=!0,o.dispatch("goodUpdate",c).then((function(){l.success("货物信息更新成功！"),d.value=!1,s()})).catch((function(){d.value=!1}))}},y=function(e){""===v.value?o.dispatch("getAllGoods",{status:"待入库",page:e-1,size:10}):o.dispatch("searchGoods",{keyword:{searchString:v.value},status:"待入库",page:e-1,size:10}).then((function(e){_.value=e.data})).catch((function(){}))};return{loading:d,keyWord:v,handleQuery:k,tableData:h,switchEditSign:r,adminHandleForm:c,handleUpdate:u,allGoods:m,imageUrl:g,beforeAvatarUpload:b,handleAvatarSuccess:f,submitGoodsInfo:S,pageChange:y,token:p}}},d=s,c=(a("4b3c"),a("2877")),u=Object(c["a"])(d,o,l,!1,null,null,null);t["default"]=u.exports},6404:function(e,t,a){}}]);
//# sourceMappingURL=chunk-a2ab70e4.2169160e.js.map