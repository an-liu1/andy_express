(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6d941c0"],{3803:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-pagination",{attrs:{background:"",layout:e.pagerLayout,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})},a=[],s=r("750b"),i={name:"pagination",props:["pager","data","limitNumber"],setup:function(e,t){var r=t.emit,n=Object(s["a"])((function(){return e.data.length>=e.limitNumber?e.pager:"prev, pager, jumper, ->, total, slot"})),a=Object(s["f"])(),i=function(e){a.value=e,r("pagechange",e)};return{pagerLayout:n,currentPage:a,handleCurrentChange:i}}},o=i,u=r("2877"),p=Object(u["a"])(o,n,a,!1,null,null,null);t["a"]=p.exports},"77d8":function(e,t,r){},acaf:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mt-5 ml-4"},[r("div",[r("el-breadcrumb",{staticClass:"border el-breadcrumb-outer",attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{staticClass:"mt-3 ml-3"},[e._v("订单详情")]),r("el-breadcrumb-item",{staticClass:"mt-3"},[r("span",{staticStyle:{color:"#f39c12"}},[r("i",{staticClass:"fas fa-window-close"}),e._v(" 申退货")])]),r("div",{staticClass:"float-right mt-2 mr-3"},[r("el-input",{staticClass:"filter-item searchInputWidth",attrs:{type:"text",placeholder:"搜索","prefix-icon":"el-icon-search",clearable:""},on:{input:e.handleQuery},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1)],1),r("div",{staticClass:"mt-5"},[r("el-table",{staticClass:"borderRadius",attrs:{data:e.tableData,"highlight-current-row":"",border:""}},[r("el-table-column",{attrs:{prop:"id",label:"货物号",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.id.substr(-10)))])]}}])}),r("el-table-column",{attrs:{prop:"goodname",label:"货物名称",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.goodname))])]}}])}),r("el-table-column",{attrs:{prop:"localExpressNumber",label:"国内快递单号",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.localExpressNumber))])]}}])}),r("el-table-column",{attrs:{prop:"picture",label:"包裹图片",align:"center",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-image",{attrs:{src:e.imageDomain+n.picture,fit:"fill","preview-src-list":[e.imageDomain+n.picture]}})]}}])}),r("el-table-column",{attrs:{prop:"warehousenumber",label:"库位号",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.warehousenumber))])]}}])}),r("el-table-column",{attrs:{prop:"weight",label:"重量(kg)",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.weight))])]}}])}),r("el-table-column",{attrs:{prop:"length",label:"尺寸(cm)",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.length?r("p",[e._v("长度："+e._s(n.length))]):e._e(),n.width?r("p",[e._v("宽度："+e._s(n.width))]):e._e(),n.height?r("p",[e._v("高度："+e._s(n.height))]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"type",label:"类别",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[0===n.type?r("span",[e._v("粉末货物")]):e._e(),1===n.type?r("span",[e._v("液体货物")]):e._e(),2===n.type?r("span",[e._v("食品货物")]):e._e(),3===n.type?r("span",[e._v("敏感类")]):e._e(),4===n.type?r("span",[e._v("普通货物")]):e._e(),5===n.type?r("span",[e._v("体积货物")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"storageTime",label:"入库时间",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(e._f("moment")(n.storageTime,"timezone","Asia/Shanghai","YYYY-MM-DD HH:mm:ss")))])]}}])}),r("el-table-column",{attrs:{label:"退货地址",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("div",[e._v("国家: "+e._s(n.returnShippingCountry))]),r("div",[e._v("省份: "+e._s(n.returnShippingProvince))]),r("div",[e._v("城市: "+e._s(n.returnShippingCity))]),r("div",[e._v("地址: "+e._s(n.returnShippingAddress))]),r("div",[e._v("邮编: "+e._s(n.returnShippingPostcode))]),r("div",[e._v("联系人: "+e._s(n.returnShippingRecevier))]),r("div",[e._v("联系电话: "+e._s(n.returnShippingPhone))])]}}])}),r("el-table-column",{attrs:{prop:"updatedAt",label:"更新时间",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e._f("moment")(r.updatedAt,"timezone","Asia/Shanghai","YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),r("el-table-column",{attrs:{prop:"goodStatus",label:"货物状态",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["已退货"===n.goodStatus?r("span",[r("p",{staticClass:"text-success"},[e._v(e._s(n.goodStatus))]),0==n.returnPayMethod?r("p",[e._v("付款方式:到付")]):e._e(),1==n.returnPayMethod?r("p",[e._v("付款方式:自付")]):e._e()]):r("span",{staticClass:"text-success"},[r("p",{staticClass:"text-danger"},[e._v(e._s(n.goodStatus))]),0==n.returnPayMethod?r("p",[e._v("付款方式:到付")]):e._e(),1==n.returnPayMethod?r("p",[e._v("付款方式:自付")]):e._e()])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["退货中"===n.goodStatus&&n.IsPayed&&"1"===n.returnPayMethod&&""===n.returnExpressNumber?r("span",{staticClass:"text-success"},[e._v("已付款等待寄出")]):e._e(),"退货中"===n.goodStatus&&!0!==n.IsPayed&&"1"==n.returnPayMethod&&""==n.returnExpressNumber&&n.returnShippingPrice?r("span",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleReturnPay(n)}}},[e._v("快递付费")]),r("p",[e._v(" 快递费用: "),r("span",{staticClass:"text-danger"},[e._v(e._s(n.returnShippingPrice))]),e._v("元 ")])],1):e._e(),"已退货"===n.goodStatus?r("span",[r("p",[e._v("退货快递:"+e._s(n.returnExpressCompany))]),r("p",[e._v("退货单号:"+e._s(n.returnExpressNumber))])]):e._e(),"退货中"===n.goodStatus&&0==n.returnPayMethod?r("span",{staticClass:"text-success"},[r("p",[e._v("等待寄件中")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.switchToEditReturnInfo(n)}}},[e._v("修改收货信息")])],1):e._e(),"退货中"!==n.goodStatus||n.IsPayed||"1"!==n.returnPayMethod||n.returnShippingPrice?e._e():r("span",{staticClass:"text-warning"},[r("p",[e._v("等待客服寻找最实惠的快递")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.switchToEditReturnInfo(n)}}},[e._v("修改收货信息")])],1),"退货中"===n.goodStatus?r("div",{staticClass:"mt-2"},[r("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.cancelReturnGoods(n)}}},[e._v("取消退货")])],1):e._e()]}}])})],1),r("el-dialog",{attrs:{title:"支付退货快递费用",visible:e.payExpressFeeSign,width:"400px",center:""},on:{"update:visible":function(t){e.payExpressFeeSign=t}}},[r("p",{staticClass:"text-center mt-3"},[e._v(" 账户余额为"),r("span",{staticClass:"text-info ml-1 mr-1"},[e._v(e._s(e.userAccountBalance))]),e._v("元 ")]),r("p",{staticClass:"text-center mt-3"},[e._v(" 快递费用为"),r("span",{staticClass:"text-info ml-1 mr-1"},[e._v(e._s(e.returnExpressFee))]),e._v("元 ")]),e.userAccountBalance<e.returnExpressFee?r("p",{staticClass:"text-center"},[r("el-link",{attrs:{icon:"el-icon-s-opportunity"},on:{click:e.switchToUserInfo}},[e._v("余额不足, 请充值")])],1):e._e(),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.payExpressFeeSign=!1}}},[e._v("取消")]),e.userAccountBalance<e.returnExpressFee?r("el-button",{attrs:{type:"primary",disabled:""}},[e._v("确定")]):r("el-button",{attrs:{type:"primary"},on:{click:e.submitReturnFees}},[e._v("确定")])],1)]),r("el-dialog",{attrs:{title:"温馨提示",visible:e.updateReturnDialogVisible,width:"400px",center:""},on:{"update:visible":function(t){e.updateReturnDialogVisible=t}}},[r("p",{staticClass:"dialog-notice"},[r("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" 所有选择的商品将寄往同一地址 ")]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mt-4"},[r("el-form",{attrs:{model:e.returnAddressForm,"label-position":"left","label-width":"100px"}},[r("el-form-item",{attrs:{label:"*付款方式:"}},[r("el-select",{model:{value:e.returnAddressForm.returnPayMethod,callback:function(t){e.$set(e.returnAddressForm,"returnPayMethod",t)},expression:"returnAddressForm.returnPayMethod"}},[r("el-option",{attrs:{value:"0",label:"到付"}},[e._v("到付")]),r("el-option",{attrs:{value:"1",label:"自付"}},[e._v("自付")])],1)],1),r("el-form-item",{attrs:{label:"*退货国家:"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.returnAddressForm.returnShippingCountry,callback:function(t){e.$set(e.returnAddressForm,"returnShippingCountry",t)},expression:"returnAddressForm.returnShippingCountry"}})],1),r("el-form-item",{attrs:{label:"*退货省份:"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.returnAddressForm.returnShippingProvince,callback:function(t){e.$set(e.returnAddressForm,"returnShippingProvince",t)},expression:"returnAddressForm.returnShippingProvince"}})],1),r("el-form-item",{attrs:{label:"*退货城市:"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.returnAddressForm.returnShippingCity,callback:function(t){e.$set(e.returnAddressForm,"returnShippingCity",t)},expression:"returnAddressForm.returnShippingCity"}})],1),r("el-form-item",{attrs:{label:"*具体地址:"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.returnAddressForm.returnShippingAddress,callback:function(t){e.$set(e.returnAddressForm,"returnShippingAddress",t)},expression:"returnAddressForm.returnShippingAddress"}})],1),r("el-form-item",{attrs:{label:"*地址邮编:"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.returnAddressForm.returnShippingPostcode,callback:function(t){e.$set(e.returnAddressForm,"returnShippingPostcode",t)},expression:"returnAddressForm.returnShippingPostcode"}})],1),r("el-form-item",{attrs:{label:"*收件人:"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.returnAddressForm.returnShippingRecevier,callback:function(t){e.$set(e.returnAddressForm,"returnShippingRecevier",t)},expression:"returnAddressForm.returnShippingRecevier"}})],1),r("el-form-item",{attrs:{label:"*联系电话:"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.returnAddressForm.returnShippingPhone,callback:function(t){e.$set(e.returnAddressForm,"returnShippingPhone",t)},expression:"returnAddressForm.returnShippingPhone"}})],1),r("el-form-item",[r("el-button",{on:{click:function(t){e.updateReturnDialogVisible=!1}}},[e._v("取消")]),""!=e.returnAddressForm.returnShippingCountry&&""!=e.returnAddressForm.returnShippingProvince&&""!=e.returnAddressForm.returnShippingCity&&""!=e.returnAddressForm.returnShippingAddress&&""!=e.returnAddressForm.returnShippingPostcode&&""!=e.returnAddressForm.returnShippingRecevier&&""!=e.returnAddressForm.returnShippingPhone?r("el-button",{attrs:{type:"primary"},on:{click:e.updateReturnAddress}},[e._v("确认")]):r("el-button",{attrs:{type:"primary",disabled:""}},[e._v("确认")])],1)],1)],1)])],1),r("pagination",{staticClass:"mt-5 mb-5 float-right",attrs:{data:e.tableData,pager:"prev, pager, next, jumper, ->, total, slot",limitNumber:"5"},on:{pagechange:e.pageChange}})],1)])},a=[],s=r("750b"),i=r("3803"),o=r("6121"),u={components:{pagination:i["a"]},setup:function(e,t){var r=t.root,n=r.$store,a=r.$router,i=r.$message,u=r.$confirm,p=Object(s["f"])(!1),l=Object(s["c"])("reload");Object(s["d"])((function(){n.dispatch("goodGet",{status:"退货中",page:"0",size:"5",status1:"已退货"})}));var c=Object(s["a"])((function(){return n.state.goodlist})),d=Object(s["f"])(""),g=Object(s["f"])([]),h=function(){var e={keyword:{searchString:d.value},status:"退货中",page:"0",size:"5",status1:"已退货"};n.dispatch("searchGoodsForUser",e).then((function(e){g.value=e.data})).catch((function(){}))},m=Object(s["a"])((function(){var e=[];return e=""!=d.value?g.value:c.value,e.map((function(e,t){return{id:e._id,ordernumber:t+1,localExpressNumber:e.localExpressNumber,goodname:e.goodName,picture:e.goodImg,warehousenumber:e.packageLocation,weight:e.goodWeight,length:e.goodSize_length,width:e.goodSize_width,height:e.goodSize_height,type:e.goodType,operation:"0",note:e.note,isStorage:e.isStorage,storageTime:e.storageTime,goodStatus:e.goodStatus,returnExpressNumber:e.returnExpressNumber,returnExpressCompany:e.returnExpressCompany,returnPayMethod:e.returnPayMethod,returnShippingPrice:e.returnShippingPrice,IsPayed:e.IsPayed,updatedAt:e.updatedAt,returnShippingRecevier:e.returnShippingRecevier,returnShippingPhone:e.returnShippingPhone,returnShippingAddress:e.returnShippingAddress,returnShippingCity:e.returnShippingCity,returnShippingProvince:e.returnShippingProvince,returnShippingCountry:e.returnShippingCountry,returnShippingPostcode:e.returnShippingPostcode}}))})),f=function(e){""===d.value?n.dispatch("goodGet",{status:"退货中",page:e-1,size:"5",status1:"已退货"}):n.dispatch("searchGoodsForUser",{keyword:{searchString:d.value},status:"退货中",page:e-1,size:"5",status1:"已退货"}).then((function(e){g.value=e.data})).catch((function(){}))},v=Object(s["f"])(!1),b=Object(s["e"])({returnedGoods:[],returnPayMethod:"0",returnShippingCountry:"",returnShippingProvince:"",returnShippingCity:"",returnShippingAddress:"",returnShippingPostcode:"",returnShippingPhone:"",returnShippingRecevier:""}),_=function(e){v.value=!0,b.returnedGoods=[e.id],b.returnPayMethod=e.returnPayMethod,b.returnShippingCountry=e.returnShippingCountry,b.returnShippingProvince=e.returnShippingProvince,b.returnShippingCity=e.returnShippingCity,b.returnShippingAddress=e.returnShippingAddress,b.returnShippingPostcode=e.returnShippingPostcode,b.returnShippingPhone=e.returnShippingPhone,b.returnShippingRecevier=e.returnShippingRecevier},S=function(){""===b.returnShippingCountry||""===b.returnShippingProvince||""===b.returnShippingCity||""===b.returnShippingAddress||""===b.returnShippingPostcode||""===b.returnShippingPhone||""===b.returnShippingRecevier?i.error("请填写完整地址信息"):(p.value=!0,n.dispatch("returnGoods",b).then((function(){i.success("已修改完成!"),p.value=!1,l()})).catch((function(){p.value=!1})))},y=Object(s["f"])(!1),P=Object(s["f"])([]),C=Object(s["f"])(0),A=function(e){y.value=!0,P.value.push(e.id),C.value=e.returnShippingPrice},x=function(){var e={returnedGoods:P.value,IsPayed:1},t={payBalance:C.value};n.dispatch("payFromAccount",t).then((function(){i.success("付款成功！"),n.dispatch("submitReturnGoodsInfo",e).then((function(){i.success("退货成功！"),l()})).catch((function(){}))})).catch((function(){}))},w=Object(s["a"])((function(){return n.state.userSelf.balance})),F=function(){a.push("/dashboard/useraccountinfo"),l()},k=function(e){u("确定取消退货?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:e.id};n.dispatch("cancelReturnGoods",t).then((function(){i.success("货物取消退货成功！"),l()})).catch((function(){i.error("取消退货失败")}))})).catch((function(){}))};return{loading:p,keyWord:d,handleQuery:h,goodList:c,tableData:m,pageChange:f,returnAddressForm:b,updateReturnDialogVisible:v,switchToEditReturnInfo:_,updateReturnAddress:S,payExpressFeeSign:y,handleReturnPay:A,returnExpressFee:C,submitReturnFees:x,imageDomain:o["a"],userAccountBalance:w,switchToUserInfo:F,cancelReturnGoods:k}}},p=u,l=(r("df8a"),r("2877")),c=Object(l["a"])(p,n,a,!1,null,"70527dea",null);t["default"]=c.exports},df8a:function(e,t,r){"use strict";var n=r("77d8"),a=r.n(n);a.a}}]);
//# sourceMappingURL=chunk-d6d941c0.75b8eb67.js.map