(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-322d1374"],{"14bc":function(e,t,a){"use strict";var r=a("e372"),n=a.n(r);n.a},"1f2c":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"errPage-container"},[a("el-button",{staticClass:"pan-back-btn",attrs:{icon:"el-icon-arrow-left"},on:{click:e.back}},[e._v(" 返回 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("h1",{staticClass:"text-jumbo text-ginormous"},[e._v(" Oops! ")]),a("h2",{staticClass:"mt-4"},[e._v("Unauthorized Page!")]),a("h2",[e._v("您没有权限访问该页面!")])]),a("el-col",{attrs:{span:12}},[a("img",{attrs:{src:e.errGif,width:"313",height:"428",alt:"Girl has dropped her ice cream."}})])],1)],1)},n=[],l=a("d9ae"),s=a.n(l),i={name:"Page401",data:function(){return{errGif:s.a+"?"+ +new Date}},methods:{back:function(){this.$route.query.noGoBack?this.$router.push({path:"/dashboard"}):this.$router.go(-1)}}},o=i,c=(a("cadb"),a("2877")),u=Object(c["a"])(o,r,n,!1,null,"2bd266d6",null);t["a"]=u.exports},3803:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{attrs:{background:"",layout:e.pagerLayout,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})},n=[],l=a("750b"),s={name:"pagination",props:["pager","data","limitNumber"],setup:function(e,t){var a=t.emit,r=Object(l["a"])((function(){return e.data.length>=e.limitNumber?e.pager:"prev, pager, jumper, ->, total, slot"})),n=Object(l["f"])(),s=function(e){n.value=e,a("pagechange",e)};return{pagerLayout:r,currentPage:n,handleCurrentChange:s}}},i=s,o=a("2877"),c=Object(o["a"])(i,r,n,!1,null,null,null);t["a"]=c.exports},"6f14":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.role?e._e():a("div",[a("Page401")],1),e.role?a("div",[a("div",[a("div",{staticClass:"border pt-2 pb-2 pl-3",staticStyle:{"font-size":"18px","background-color":"#F0F3F4","border-radius":"3px"}},[a("span",{staticClass:"mb-3"},[e._v("售后统计")]),a("div",{staticClass:"float-right mr-3"},[a("el-input",{staticClass:"filter-item searchInputWidth",attrs:{type:"text",placeholder:"搜索","prefix-icon":"el-icon-search",clearable:""},on:{input:e.handleQuery},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1)])])]):e._e(),a("div",{staticClass:"mt-5 mb-5"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!e.tableData,expression:"!tableData"}],staticClass:"borderRadius",attrs:{data:e.tableData,"highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{prop:"updatedAt",label:"更新时间",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("moment")(a.updatedAt,"timezone","Asia/Shanghai","YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("el-table-column",{attrs:{prop:"email",label:"用户邮箱",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.email))])]}}])}),a("el-table-column",{attrs:{prop:"aftersale_type",label:"售后类型",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["损坏"===r.aftersale_type?a("span",{staticClass:"text-danger"},[e._v("损坏")]):e._e(),"丢失"===r.aftersale_type?a("span",{staticClass:"text-danger"},[e._v("丢失")]):e._e(),"其他"===r.aftersale_type?a("span",{staticClass:"text-danger"},[e._v("其他")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"aftersale_title",label:"标题",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.aftersale_title)+" ")]}}])}),a("el-table-column",{attrs:{prop:"aftersale_content",label:"内容",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.aftersale_content)+" ")]}}])}),a("el-table-column",{attrs:{prop:"aftersale_image",label:"投诉图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.aftersale_image.length>1?a("el-carousel",{attrs:{height:"150px","indicator-position":"none"}},e._l(r.aftersale_image,(function(t,n){return a("el-carousel-item",{key:n},[a("img",{staticClass:"img-fluid pointer",attrs:{src:t.src},on:{click:function(t){return e.showMultiple(r,n)}}})])})),1):a("el-image",{staticClass:"img-fluid",staticStyle:{height:"150px"},attrs:{src:r.aftersale_image[0].src,"preview-src-list":[r.aftersale_image[0].src],fit:"cover"}}),a("vue-easy-lightbox",{attrs:{visible:e.lightboxVisible,imgs:e.img,index:e.index},on:{hide:e.handleHide}})]}}])}),a("el-table-column",{attrs:{prop:"createdAt",label:"发表时间",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("moment")(a.createdAt,"timezone","Asia/Shanghai","YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("el-table-column",{attrs:{prop:"aftersaleOperator",label:"操作人员",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.aftersaleOperator?a("span",{staticClass:"text-danger"},[e._v(e._s(r.aftersaleOperator))]):a("span",{staticClass:"text-info"},[e._v("无操作人员")])]}}])}),a("el-table-column",{attrs:{prop:"compensation",align:"center",label:"操作/回馈",width:"250",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.compensation?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 float-left"},[a("el-tag",{attrs:{type:"success"}},[e._v(" 解决方法:")])],1),a("div",{staticClass:"col-7"},[a("span",{staticClass:"float-left"},[e._v(e._s(r.solution))])])]),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-4 float-left"},[a("el-tag",{attrs:{type:"warning"}},[e._v(" 赔偿金额:")])],1),a("div",{staticClass:"col-7"},[a("span",{staticClass:"float-left"},[e._v(e._s(r.compensation))])])]),r.is_solve?a("div",{staticClass:"mt-3 text-success"},[e._v(" 售后服务已解决 "),a("i",{staticClass:"el-icon-circle-check"})]):a("div",{staticClass:"mt-3"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUpdate(r)}}},[e._v("修改")]),a("p",{staticClass:"mt-2"},[a("span",{staticClass:"text-danger"},[e._v(" 等待客户确认中 "),a("i",{staticClass:"el-icon-info"})])])],1)]):a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.lockRowAfterSale(r)}}},[e._v(" 反馈 ")])]}}])})],1),a("pagination",{staticClass:"mt-5 float-right",attrs:{data:e.tableData,pager:"prev, pager, next, jumper, ->, total, slot",limitNumber:"5"},on:{pagechange:e.pageChange}}),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"请填写解决办法和赔付金额",visible:e.improvementSign,width:"400px",center:""},on:{"update:visible":function(t){e.improvementSign=t}}},[a("el-form",{ref:"afterSaleForm",attrs:{model:e.afterSaleForm,"label-width":"90px","label-position":"left"}},[a("el-form-item",{attrs:{label:"解决办法:"}},[a("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:e.afterSaleForm.solution,callback:function(t){e.$set(e.afterSaleForm,"solution",t)},expression:"afterSaleForm.solution"}})],1),a("el-form-item",{attrs:{label:"赔偿金额:"}},[a("el-input",{model:{value:e.afterSaleForm.compensation,callback:function(t){e.$set(e.afterSaleForm,"compensation",t)},expression:"afterSaleForm.compensation"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.improvementSign=!1}}},[e._v("取消")]),""===e.afterSaleForm.solution||""===e.afterSaleForm.compensation?a("el-button",{attrs:{type:"primary",disabled:""}},[e._v("确定")]):a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdviceImprovement}},[e._v("确定")])],1)],1)],1)])},n=[],l=a("1f2c"),s=a("750b"),i=a("3803"),o=a("6121"),c={components:{Page401:l["a"],pagination:i["a"]},setup:function(e,t){var a=t.root,r=a.$store,n=a.$message;Object(s["d"])((function(){r.dispatch("getAdminAfterSale",{page:0,size:5})}));var l=Object(s["f"])(!1),i=Object(s["c"])("reload"),c=Object(s["a"])((function(){return r.state.allAdminAfterSale})),u=Object(s["a"])((function(){return"Admin/管理员"===r.state.role})),d=Object(s["f"])(!1),f=Object(s["e"])({afterSaleId:"",solution:"",compensation:"0",order_id:"",aftersaleOperator:r.state.userSelf.username}),p=function(e){d.value=!0,f.afterSaleId=e._id,f.order_id=e.order_id},m=function(){""===f.solution?n.error("请填写解决办法！"):(l.value=!0,r.dispatch("solveAfterSale",f).then((function(){n.success("售后回复成功！"),l.value=!1,i()})).catch((function(){l.value=!1})))},v=Object(s["f"])(!1),g=Object(s["f"])(0),b=Object(s["f"])(""),_=function(){v.value=!1},h=function(e,t){v.value=!0,b.value=e.aftersale_image,g.value=t},y=Object(s["f"])(""),S=Object(s["f"])([]),C=function(){var e={keyword:{searchString:y.value},page:0,size:5};r.dispatch("searchAdminAfterSale",e).then((function(e){S.value=e.data})).catch((function(){}))},k=Object(s["a"])((function(){var e=[];return e=""!=y.value?S.value:c.value,e.map((function(e){return{_id:e._id,updatedAt:e.updatedAt,email:e.email,aftersale_type:e.aftersale_type,aftersale_title:e.aftersale_title,aftersale_content:e.aftersale_content,aftersale_image:e.aftersale_image.map((function(e){return{src:o["a"]+e}})),createdAt:e.createdAt,compensation:e.compensation,solution:e.solution,is_solve:e.is_solve,order_id:e.order_id,aftersaleOperator:e.aftersaleOperator}}))})),w=function(e){""===y.value?r.dispatch("getAdminAfterSale",{page:e-1,size:5}):r.dispatch("searchAdminAfterSale",{keyword:{searchString:y.value},page:e-1,size:5}).then((function(e){S.value=e.data})).catch((function(){}))},x=function(e){d.value=!0,f.afterSaleId=e._id,f.solution=e.solution,f.compensation=e.compensation,f.order_id=e.order_id};return{keyWord:y,handleQuery:C,tableData:k,pageChange:w,loading:l,role:u,allAfterSaleList:c,lockRowAfterSale:p,improvementSign:d,afterSaleForm:f,handleAdviceImprovement:m,lightboxVisible:v,img:b,index:g,showMultiple:h,handleHide:_,handleUpdate:x,imageDomain:o["a"]}}},u=c,d=(a("14bc"),a("2877")),f=Object(d["a"])(u,r,n,!1,null,null,null);t["default"]=f.exports},cadb:function(e,t,a){"use strict";var r=a("e5c3"),n=a.n(r);n.a},d9ae:function(e,t,a){e.exports=a.p+"img/401.089007e7.gif"},e372:function(e,t,a){},e5c3:function(e,t,a){}}]);
//# sourceMappingURL=chunk-322d1374.91a30145.js.map