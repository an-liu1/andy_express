(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77a7dabd"],{3803:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{attrs:{background:"",layout:e.pagerLayout,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})},n=[],o=a("750b"),i={name:"pagination",props:["pager","data","limitNumber"],setup:function(e,t){var a=t.emit,r=Object(o["a"])((function(){return e.data.length>=e.limitNumber?e.pager:"prev, pager, jumper, ->, total, slot"})),n=Object(o["f"])(),i=function(e){n.value=e,a("pagechange",e)};return{pagerLayout:r,currentPage:n,handleCurrentChange:i}}},s=i,c=a("2877"),l=Object(c["a"])(s,r,n,!1,null,null,null);t["a"]=l.exports},"3fd2":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"border pt-2 pb-2 pl-3",staticStyle:{"font-size":"18px","background-color":"#F0F3F4","border-radius":"3px"}},[a("span",{staticClass:"mb-3"},[e._v("订单流水")]),a("div",{staticClass:"float-right mr-3"},[a("el-input",{staticClass:"filter-item searchInputWidth",attrs:{type:"text",placeholder:"搜索","prefix-icon":"el-icon-search",clearable:""},on:{input:e.handleQuery},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1),a("el-popover",{staticClass:"float-right mr-3",attrs:{placement:"bottom",title:"选择导出时间",width:"370",trigger:"click"}},[a("div",[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.dateDuration,callback:function(t){e.dateDuration=t},expression:"dateDuration"}}),a("el-button",{staticClass:"float-right mt-3 pl-4 pr-4",attrs:{loading:e.downloadLoading,type:"primary"},on:{click:e.handleDownload}},[e._v(" 导出 ")])],1),a("el-button",{attrs:{slot:"reference",icon:"el-icon-document",type:"primary"},slot:"reference"},[e._v("Excel导出")])],1)],1),a("div",{staticClass:"mt-5"},[a("el-table",{staticClass:"borderRadius",attrs:{data:e.tableData,"highlight-current-row":"",border:"","default-sort":{prop:"createdAt",order:"descending"}}},[a("el-table-column",{attrs:{prop:"username",label:"会员名称",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.username))])]}}])}),a("el-table-column",{attrs:{prop:"id",label:"订单号",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.id.substr(-10)))])]}}])}),a("el-table-column",{attrs:{prop:"createdAt",label:"创建时间",align:"center",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e._f("moment")(r.createdAt,"timezone","Asia/Shanghai","YYYY-MM-DD HH:mm:ss")))])]}}])}),a("el-table-column",{attrs:{prop:"orderRealWeight",label:"计算重量(kg)",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.orderRealWeight))])]}}])}),a("el-table-column",{attrs:{prop:"incomePrice",label:"实付金额(元)",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.incomePrice))])]}}])}),a("el-table-column",{attrs:{prop:"costPrice",label:"成本金额(元)",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.costPrice))])]}}])}),a("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["已发货"===r.orderStatus?a("span",{staticClass:"text-danger"},[e._v(e._s(r.orderStatus))]):a("span",{staticClass:"text-success"},[e._v(e._s(r.orderStatus))])]}}])}),a("el-table-column",{attrs:{label:"寄出时间",prop:"shippingTime",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e._f("moment")(r.shippingTime,"timezone","Asia/Shanghai","YYYY-MM-DD")))])]}}])}),a("el-table-column",{attrs:{label:"寄送时效",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[(r.status,a("span",[e._v(e._s(e._f("moment")(r.shippingTime,"timezone","Asia/Shanghai","from","now")))]))]}}])}),a("el-table-column",{attrs:{prop:"compensation",label:"售后赔付",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.compensation))])]}}])}),a("el-table-column",{attrs:{prop:"orderProfit",label:"每单利润率",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.orderProfit))])]}}])})],1),a("pagination",{staticClass:"mt-5 mb-5 float-right",attrs:{data:e.tableData,pager:"prev, pager, next, jumper, ->, total, slot",limitNumber:"20"},on:{pagechange:e.pageChange}})],1)])])},n=[],o=a("750b"),i=a("3803"),s=a("6fa2"),c={components:{pagination:i["a"]},setup:function(e,t){var r=t.root,n=r.$store,i=r.$moment;Object(o["d"])((function(){n.dispatch("getAllOrderForm",{status:"已签收",page:"0",size:"20",status1:"已发货"})}));var c=Object(o["a"])((function(){return n.state.orderlist})),l=Object(o["a"])((function(){var e=[];return e=""!=u.value?d.value:c.value,e.map((function(e){var t=Math.round(e.orderSize_length*e.orderSize_width*e.orderSize_height/5e3),a=e.compensation?e.compensation:0;return{id:e._id,createdAt:e.createdAt,date:e.updatedAt,username:e.username,incomePrice:e.incomePrice,costPrice:e.costPrice,compensation:e.compensation,orderStatus:e.orderStatus,orderRealWeight:t>e.orderWeight?t:e.orderWeight,shippingTime:e.shippingTime,orderProfit:Object(s["b"])(e.incomePrice/(e.costPrice+a),1)}}))})),u=Object(o["f"])(""),d=Object(o["f"])([]),p=function(){var e={keyword:{searchString:u.value},status:"已签收",page:0,size:20,status1:"已发货"};n.dispatch("searchOrders",e).then((function(e){d.value=e.data})).catch((function(){}))},m=function(e){""===u.value?n.dispatch("getAllOrderForm",{status:"已签收",page:e-1,size:20,status1:"已发货"}):n.dispatch("searchOrders",{keyword:{searchString:u.value},status:"已签收",page:e-1,size:20,status1:"已发货"}).then((function(e){d.value=e.data})).catch((function(){}))},f=Object(o["f"])(!1),g=function(e,t){return t.map((function(t){return e.map((function(e){return"shippingDuration"===e?t["shippingTime"]?i(t["shippingTime"]).tz("Asia/Shanghai").fromNow():"":"shippingTime"==e?t[e]?i(t[e]).tz("Asia/Shanghai").format("YYYY-MM-DD HH:mm:ss"):"":"updatedAt"==e||"createdAt"==e?i(t[e]).tz("Asia/Shanghai").format("YYYY-MM-DD HH:mm:ss"):t[e]}))}))},h=Object(o["a"])((function(){return n.state.orderTurnoverData.map((function(e){var t=Math.round(e.orderSize_length*e.orderSize_width*e.orderSize_height/5e3),a=e.compensation?e.compensation:0;return{id:e._id,createdAt:e.createdAt,date:e.updatedAt,username:e.username,incomePrice:e.incomePrice,costPrice:e.costPrice,compensation:e.compensation,orderStatus:e.orderStatus,orderRealWeight:t>e.orderWeight?t:e.orderWeight,shippingTime:e.shippingTime,orderProfit:Object(s["b"])(e.incomePrice/(e.costPrice+a),1)}}))})),b=function(){var e=i(v.value[0]).subtract(1,"days").format("YYYY-MM-DD 00:00:00"),t=i(v.value[1]).add(1,"days").format("YYYY-MM-DD 00:00:00");n.dispatch("getOrderTurnover",{fromDate:e,toDate:t}).then((function(){f.value=!0,a.e("chunk-5a525182").then(a.bind(null,"3458")).then((function(a){var r=["会员名称","订单号","创建时间","计算重量(kg)","实付金额(元)","成本金额(元)","订单状态","寄出时间","寄送时效","售后赔付","每单利润率"],n=["username","id","createdAt","orderRealWeight","incomePrice","costPrice","orderStatus","shippingTime","shippingDuration","compensation","orderProfit"],o=g(n,h.value);a.export_json_to_excel({header:r,data:o,filename:i(e).add(1,"days").format("YYYY/MM/DD")+"-"+i(t).subtract(1,"days").format("MM/DD")+"- 订单流水",autoWidth:!0,bookType:"xlsx"}),f.value=!1}))}))},v=Object(o["f"])(""),_=Object(o["e"])({shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]});return{keyWord:u,handleQuery:p,pageChange:m,orderList:c,tableData:l,downloadLoading:f,handleDownload:b,pickerOptions:_,dateDuration:v}}},l=c,u=(a("d6e9"),a("2877")),d=Object(u["a"])(l,r,n,!1,null,"6098e548",null);t["default"]=d.exports},d6e9:function(e,t,a){"use strict";var r=a("d943"),n=a.n(r);n.a},d943:function(e,t,a){}}]);
//# sourceMappingURL=chunk-77a7dabd.aec8ebd4.js.map