(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c29ea4a"],{3803:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{attrs:{background:"",layout:e.pagerLayout,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})},n=[],s=a("750b"),c={name:"pagination",props:["pager","data","limitNumber"],setup:function(e,t){var a=t.emit,r=Object(s["a"])((function(){return e.data.length>=e.limitNumber?e.pager:"prev, pager, jumper, ->, total, slot"})),n=Object(s["f"])(),c=function(e){n.value=e,a("pagechange",e)};return{pagerLayout:r,currentPage:n,handleCurrentChange:c}}},i=c,o=a("2877"),l=Object(o["a"])(i,r,n,!1,null,null,null);t["a"]=l.exports},"42ff":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mt-5 ml-4"},[a("div",[a("el-breadcrumb",{staticClass:"border el-breadcrumb-outer",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{staticClass:"mt-3 ml-3"},[e._v("订单详情")]),a("el-breadcrumb-item",{staticClass:"mt-3"},[a("span",{staticStyle:{color:"#f39c12"}},[a("i",{staticClass:"fas fa-file-signature"}),e._v(" 签收评价")])]),a("div",{staticClass:"float-right mt-2 mr-3"},[a("el-input",{staticClass:"filter-item searchInputWidth",attrs:{type:"text",placeholder:"搜索","prefix-icon":"el-icon-search",clearable:""},on:{input:e.handleQuery},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1)],1),a("el-table",{staticClass:"borderRadius mt-5",attrs:{data:e.TableData,border:"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单号",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.orderId.substr(-10)))])]}}])}),a("el-table-column",{attrs:{prop:"expressCompany",label:"国际快递公司",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.expressCompany))])]}}])}),a("el-table-column",{attrs:{prop:"trackingNumber",label:"国际单号",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.trackingNumber))])]}}])}),a("el-table-column",{attrs:{prop:"trackingContact",label:"收件人",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.trackingContact))])]}}])}),a("el-table-column",{attrs:{prop:"trackingAddress",label:"收件地址",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.trackingAddress))])]}}])}),a("el-table-column",{attrs:{label:"更新时间",align:"center",prop:"packageTime",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e._f("moment")(r.packageTime,"timezone","Asia/Shanghai","YYYY-MM-DD HH:mm:ss")))])]}}])}),a("el-table-column",{attrs:{label:"快递寄送情况",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[a("el-link",{attrs:{type:"warning",target:"_blank",href:e.returnTrackingLink(r.expressCompany,r.trackingNumber)}},[e._v("点击查询")])],1)]}}])}),a("el-table-column",{attrs:{prop:"status",label:"签收",width:"160",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-checkbox",{model:{value:r.signstatus,callback:function(t){e.$set(r,"signstatus",t)},expression:"row.signstatus"}}),!0===r.signstatus?a("div",[e._v(" 留下您的评价吧： "),a("el-rate",{attrs:{"show-score":"",colors:e.colors},model:{value:r.commentvalue,callback:function(t){e.$set(r,"commentvalue",t)},expression:"row.commentvalue"}})],1):e._e()]}}])})],1),a("div",{staticClass:"mt-5 float-right"},[!0===e.SignSwitch?a("el-button",{attrs:{type:"primary"},on:{click:e.submitSignComment}},[e._v("确认签收")]):a("el-button",{attrs:{type:"primary",disabled:""}},[e._v("确认签收")])],1),a("pagination",{staticClass:"mt-5 float-right",attrs:{data:e.TableData,pager:"prev, pager, next, jumper, ->, total, slot",limitNumber:"5"},on:{pagechange:e.pageChange}})],1)])},n=[],s=(a("99af"),a("4de4"),a("d81d"),a("750b")),c=a("3803"),i={components:{pagination:c["a"]},setup:function(e,t){var a=t.root,r=a.$store,n=a.$message;Object(s["d"])((function(){r.dispatch("getOrderForm",{status:"已发货",page:"0",size:"5"})}));var c=Object(s["f"])(!1),i=Object(s["c"])("reload"),o=Object(s["a"])((function(){return r.state.selforderlist})),l=Object(s["f"])(""),u=Object(s["f"])([]),p=function(){var e={keyword:{searchString:l.value},status:"已发货",page:"0",size:"5"};r.dispatch("searchOrdersForUser",e).then((function(e){u.value=e.data})).catch((function(){}))},d=Object(s["a"])((function(){var e=[];return e=""!=l.value?u.value:o.value,e.map((function(e){return{orderId:e._id,expressCompany:e.orderExpressRetail,trackingNumber:e.orderShippingNumber,trackingContact:"".concat(e.shippingRecevier,", ").concat(e.shippingPhone),trackingAddress:"".concat(e.shippingAddress,", ").concat(e.shippingCity,", ").concat(e.shippingProvince,", ").concat(e.shippingCountry,", ").concat(e.shippingPostcode),packageTime:e.updatedAt,signstatus:!1,commentvalue:0}}))})),g=function(e){var t=e.row;return!0===t.signstatus?"warning-row":""},f=Object(s["e"])(["#99A9BF","#F7BA2A","#FF9900"]),m=function(e){""===l.value?r.dispatch("getOrderForm",{status:"已发货",page:e-1,size:5}):r.dispatch("searchOrdersForUser",{keyword:{searchString:l.value},status:"已发货",page:e-1,size:5}).then((function(e){u.value=e.data})).catch((function(){}))},b=Object(s["f"])(!1);Object(s["g"])((function(){0==d.value.filter((function(e){return 1==e.signstatus})).length?b.value=!1:b.value=!0}));var v=function(){c.value=!0;var e=d.value.filter((function(e){return!0===e.signstatus})).map((function(e){return{id:e.orderId,is_delivery:1,orderEvaluate:e.commentvalue}}));r.dispatch("isDeliveryAndRank",e).then((function(){n.success("感谢您的签收以及评分！"),c.value=!1,i()})).catch((function(){c.value=!1}))},h=function(e,t){if("DHL"===e){var a="https://www.dhl.com/en/express/tracking.html?AWB=",r="&brand=DHL";return a+t+r}if("UPS"===e){var s="https://www.ups.com/track?loc=en_CA&tracknum=",c="&requester=WT/trackdetails";return s+t+c}if("FedEx"===e){var i="https://www.fedex.com/apps/fedextrack/index.html?tracknumbers=",o="&cntry_code=ca";return i+t+o}if("TNT"===e){var l="https://www.tnt.com/express/en_ca/site/tracking.html?searchType=con&cons=";return l+t}if("EMS"===e){var u="https://t.17track.net/en#nums=";return u+t}"Special"===e&&n.error("暂无Special速递查询信息")};return{loading:c,keyWord:l,handleQuery:p,pageChange:m,TableData:d,packageTrackingList:o,tableRowClassName:g,colors:f,SignSwitch:b,submitSignComment:v,returnTrackingLink:h}}},o=i,l=(a("9508"),a("2877")),u=Object(l["a"])(o,r,n,!1,null,null,null);t["default"]=u.exports},"4de4":function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").filter,s=a("1dde"),c=a("ae40"),i=s("filter"),o=c("filter");r({target:"Array",proto:!0,forced:!i||!o},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"822f":function(e,t,a){},9508:function(e,t,a){"use strict";var r=a("822f"),n=a.n(r);n.a}}]);
//# sourceMappingURL=chunk-5c29ea4a.ddeccb9e.js.map