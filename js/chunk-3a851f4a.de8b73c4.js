(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a851f4a"],{"1eba":function(e,t,r){"use strict";var i=r("2adc"),a=r.n(i);a.a},"2adc":function(e,t,r){},3803:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-pagination",{attrs:{background:"",layout:e.pagerLayout,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})},a=[],l=r("750b"),o={name:"pagination",props:["pager","data","limitNumber"],setup:function(e,t){var r=t.emit,i=Object(l["a"])((function(){return e.data.length>=e.limitNumber?e.pager:"prev, pager, jumper, ->, total, slot"})),a=Object(l["f"])(),o=function(e){a.value=e,r("pagechange",e)};return{pagerLayout:i,currentPage:a,handleCurrentChange:o}}},n=o,c=r("2877"),d=Object(c["a"])(n,i,a,!1,null,null,null);t["a"]=d.exports},"66f8":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mt-5"},[r("div",[r("el-breadcrumb",{staticClass:"border el-breadcrumb-outer",attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{staticClass:"mt-3 ml-3"},[e._v("所有商品")]),r("el-breadcrumb-item",{staticClass:"mt-3"},[r("span",{staticStyle:{color:"#f39c12"}},[r("i",{staticClass:"fas fa-box"}),e._v(" 待打包")])]),r("div",{staticClass:"float-right mt-2 mr-3"},[r("el-input",{staticClass:"filter-item searchInputWidth",attrs:{type:"text",placeholder:"搜索","prefix-icon":"el-icon-search",clearable:""},on:{input:e.handleQuery},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1)],1),r("div",{staticClass:"mt-5"},[r("el-table",{staticClass:"borderRadius",attrs:{data:e.tableData,"highlight-current-row":"",border:""}},[r("el-table-column",{attrs:{prop:"id",label:"订单号",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.id.substr(-10)))])]}}])}),r("el-table-column",{attrs:{prop:"username",label:"会员名称",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.username))])]}}])}),r("el-table-column",{attrs:{prop:"goodsList",label:"货物详情",align:"center",width:"400",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return e._l(i.goodsList,(function(t,i){return r("div",{key:i,staticClass:"mb-2"},[r("div",[e._v("货物序号: "+e._s(t.goodId))]),r("div",[e._v("货物名称: "+e._s(t.goodName))]),r("div",[e._v("货物数量: "+e._s(t.goodNumber))]),r("div",[e._v("货物位置: "+e._s(t.goodLocation))]),r("hr")])}))}}])}),r("el-table-column",{attrs:{prop:"shippingCountry",label:"运送国家",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.shippingCountry))])]}}])}),r("el-table-column",{attrs:{prop:"updatedAt",label:"更新时间",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e._f("moment")(r.updatedAt,"timezone","Asia/Shanghai","YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),r("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("span",{staticClass:"text-success"},[e._v(e._s(i.orderStatus))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUpdate(i)}}},[e._v(" 打包 ")])]}}])})],1),r("pagination",{staticClass:"mt-5 float-right mb-5",attrs:{data:e.tableData,pager:"prev, pager, next, jumper, ->, total, slot",limitNumber:"5"},on:{pagechange:e.pageChange}})],1),r("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mb-5",attrs:{title:"温馨提示",visible:e.editDialogVisible,width:"420px",center:""},on:{"update:visible":function(t){e.editDialogVisible=t}}},[r("el-form",{attrs:{model:e.handleOrderForm,"label-position":"left","label-width":"140px"}},[r("el-form-item",{attrs:{label:"*订单货物长度(cm):"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.handleOrderForm.orderSize_length,callback:function(t){e.$set(e.handleOrderForm,"orderSize_length",t)},expression:"handleOrderForm.orderSize_length"}})],1),r("el-form-item",{attrs:{label:"*订单货物宽度(cm):"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.handleOrderForm.orderSize_width,callback:function(t){e.$set(e.handleOrderForm,"orderSize_width",t)},expression:"handleOrderForm.orderSize_width"}})],1),r("el-form-item",{attrs:{label:"*订单货物高度(cm):"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.handleOrderForm.orderSize_height,callback:function(t){e.$set(e.handleOrderForm,"orderSize_height",t)},expression:"handleOrderForm.orderSize_height"}})],1),r("el-form-item",{attrs:{label:"*订单货物重量(kg):"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.handleOrderForm.orderWeight,callback:function(t){e.$set(e.handleOrderForm,"orderWeight",t)},expression:"handleOrderForm.orderWeight"}})],1),r("el-form-item",{attrs:{label:"*订单货物类型:"}},[r("el-select",{attrs:{autocomplete:"off"},model:{value:e.handleOrderForm.orderType,callback:function(t){e.$set(e.handleOrderForm,"orderType",t)},expression:"handleOrderForm.orderType"}},[r("el-option",{attrs:{label:"粉末货物",value:"0"}}),r("el-option",{attrs:{label:"液体货物",value:"1"}}),r("el-option",{attrs:{label:"食品货物",value:"2"}}),r("el-option",{attrs:{label:"敏感类",value:"3"}}),r("el-option",{attrs:{label:"普通货物",value:"4"}}),r("el-option",{attrs:{label:"体积货物",value:"5"}})],1)],1),r("el-form-item",{attrs:{label:"*订单货物位置:"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.handleOrderForm.packageLocation,callback:function(t){e.$set(e.handleOrderForm,"packageLocation",t)},expression:"handleOrderForm.packageLocation"}})],1),r("el-form-item",{attrs:{label:"*订单照片:"}},[r("el-upload",{attrs:{drag:"",action:"https://upload-z2.qiniup.com",data:e.token,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"file-list":e.imageUrl,"list-type":"picture"}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text"},[e._v("拖拽照片 或者 "),r("em",[e._v("点击上传")])]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" *上传照片只支持PNG，GIF，JPEG 和 JPG格式，大小不超过1MB。 ")])])],1),r("el-form-item",{attrs:{label:"*快递价格及时效:"}},e._l(e.handleOrderForm.retailPriceAndTime,(function(t,i){return r("div",{key:i},[e._v(" "+e._s(t.name)+": "),r("el-input",{staticClass:"input-width ml-3 float-right",attrs:{autocomplete:"off",placeholder:"时效(工作日)"},model:{value:t.time,callback:function(r){e.$set(t,"time",r)},expression:"item.time"}}),r("el-input",{staticClass:"input-width ml-1 float-right",staticStyle:{width:"60px"},attrs:{autocomplete:"off",placeholder:"价格"},model:{value:t.price,callback:function(r){e.$set(t,"price",r)},expression:"item.price"}})],1)})),0),r("el-form-item",{attrs:{label:"*打包时间:"}},[r("el-date-picker",{attrs:{type:"datetime"},model:{value:e.handleOrderForm.packageTime,callback:function(t){e.$set(e.handleOrderForm,"packageTime",t)},expression:"handleOrderForm.packageTime"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submitOrderEdition}},[e._v("确定")])],1)],1)],1)])},a=[],l=r("750b"),o=r("3803"),n=r("6121"),c={components:{pagination:o["a"]},setup:function(e,t){var r=t.root,i=r.$store,a=r.$message,o=Object(l["c"])("reload"),c=Object(l["f"])(!1);Object(l["d"])((function(){i.dispatch("getAllOrderForm",{status:"待打包",page:"0",size:"5"}),i.dispatch("getUpToken")}));var d=Object(l["f"])(!1),s=Object(l["e"])({orderId:"",orderImg:"",orderSize_width:"",orderSize_height:"",orderSize_length:"",orderWeight:"",orderType:"",packageLocation:"",orderGoodsList:[],retailPriceAndTime:[{name:"DHL",price:"",time:""},{name:"UPS",price:"",time:""},{name:"FedEx",price:"",time:""},{name:"TNT",price:"",time:""},{name:"EMS",price:"",time:""},{name:"Special",price:"",time:""}],packageTime:"",orderStatus:"已打包"}),m=Object(l["a"])((function(){return i.state.orderlist})),u=Object(l["a"])((function(){var e=[];return e=""!=p.value?g.value:m.value,e.map((function(e){return{id:e._id,shippingCountry:e.shippingCountry,goodsList:e.orderGoodsList,username:e.username,updatedAt:e.updatedAt,orderStatus:e.orderStatus}}))})),p=Object(l["f"])(""),g=Object(l["f"])([]),h=function(){var e={keyword:{searchString:p.value},status:"待打包",page:"0",size:"5"};i.dispatch("searchOrders",e).then((function(e){g.value=e.data})).catch((function(){}))},f=function(e){d.value=!0,s.orderId=e.id,s.orderGoodsList=e.goodsList.map((function(e){return e.goodId}))},b=Object(l["e"])([]),v=Object(l["a"])((function(){return i.state.token})),T=function(e){var t=!0,r=["image/gif","image/jpeg","image/jpg","image/png"],i=e.size/1024/1024<1;return-1==r.indexOf(e.type)&&(a.error("上传文件应该是图片格式！"),t=!1),i||(a.error("图片大小超过1MB了哦！"),t=!1),t},P=function(e){i.dispatch("getUpToken").then((function(){s.orderImg=e.key,b.value=[n["a"]+e.key]}))},S=function(){var e={orderId:s.orderId,orderImg:s.orderImg,orderSize_width:s.orderSize_width,orderSize_height:s.orderSize_height,orderSize_length:s.orderSize_length,orderWeight:s.orderWeight,orderType:s.orderType,packageLocation:s.packageLocation,retailPriceAndTime:{DHL:{price:s.retailPriceAndTime[0].price,time:s.retailPriceAndTime[0].time},UPS:{price:s.retailPriceAndTime[1].price,time:s.retailPriceAndTime[1].time},FedEx:{price:s.retailPriceAndTime[2].price,time:s.retailPriceAndTime[2].time},TNT:{price:s.retailPriceAndTime[3].price,time:s.retailPriceAndTime[3].time},EMS:{price:s.retailPriceAndTime[4].price,time:s.retailPriceAndTime[4].time},Special:{price:s.retailPriceAndTime[5].price,time:s.retailPriceAndTime[5].time}},goodsLists:s.orderGoodsList,packageTime:s.packageTime,packageOperator:i.state.userSelf.username,cancleFee:20};""==e.orderId||""==e.orderImg||""==e.orderSize_width||""==e.orderSize_height||""==e.orderSize_length||""==e.orderWeight||""==e.orderType||""==e.packageLocation||""==e.packageTime?a.error("请填写完整的货物打包信息"):""==e.retailPriceAndTime.DHL.price&&""==e.retailPriceAndTime.DHL.time&&""==e.retailPriceAndTime.UPS.price&&""==e.retailPriceAndTime.UPS.time&&""==e.retailPriceAndTime.FedEx.price&&""==e.retailPriceAndTime.FedEx.time&&""==e.retailPriceAndTime.TNT.price&&""==e.retailPriceAndTime.TNT.time&&""==e.retailPriceAndTime.EMS.price&&""==e.retailPriceAndTime.EMS.time&&""==e.retailPriceAndTime.Special.price&&""==e.retailPriceAndTime.Special.time?a.error("请填写快递信息"):""!=e.retailPriceAndTime.DHL.price&&""==e.retailPriceAndTime.DHL.time||""==e.retailPriceAndTime.DHL.price&&""!=e.retailPriceAndTime.DHL.time?a.error("请填写完整的DHL快递信息"):""!=e.retailPriceAndTime.UPS.price&&""==e.retailPriceAndTime.UPS.time||""==e.retailPriceAndTime.UPS.price&&""!=e.retailPriceAndTime.UPS.time?a.error("请填写完整的UPS快递信息"):""!=e.retailPriceAndTime.FedEx.price&&""==e.retailPriceAndTime.FedEx.time||""==e.retailPriceAndTime.FedEx.price&&""!=e.retailPriceAndTime.FedEx.time?a.error("请填写完整的FedEx快递信息"):""!=e.retailPriceAndTime.TNT.price&&""==e.retailPriceAndTime.TNT.time||""==e.retailPriceAndTime.TNT.price&&""!=e.retailPriceAndTime.TNT.time?a.error("请填写完整的TNT快递信息"):""!=e.retailPriceAndTime.EMS.price&&""==e.retailPriceAndTime.EMS.time||""==e.retailPriceAndTime.EMS.price&&""!=e.retailPriceAndTime.EMS.time?a.error("请填写完整的EMS快递信息"):""!=e.retailPriceAndTime.Special.price&&""==e.retailPriceAndTime.Special.time||""==e.retailPriceAndTime.Special.price&&""!=e.retailPriceAndTime.Special.time?a.error("请填写完整的Special快递信息"):(c.value=!0,d.value=!1,i.dispatch("updateOrderForm",e).then((function(){a.success("货物信息更新成功！"),c.value=!1,o()})).catch((function(){c.value=!1})))},_=function(e){""===p.value?i.dispatch("getAllOrderForm",{status:"待打包",page:e-1,size:5}):i.dispatch("searchOrders",{keyword:{searchString:p.value},status:"待打包",page:e-1,size:5}).then((function(e){g.value=e.data})).catch((function(){}))};return{loading:c,keyWord:p,handleQuery:h,pageChange:_,orderList:m,editDialogVisible:d,tableData:u,handleOrderForm:s,handleUpdate:f,imageUrl:b,beforeAvatarUpload:T,handleAvatarSuccess:P,submitOrderEdition:S,token:v}}},d=c,s=(r("1eba"),r("2877")),m=Object(s["a"])(d,i,a,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-3a851f4a.de8b73c4.js.map