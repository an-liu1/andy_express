(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99c33f34"],{"1f2c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"errPage-container"},[a("el-button",{staticClass:"pan-back-btn",attrs:{icon:"el-icon-arrow-left"},on:{click:e.back}},[e._v(" 返回 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("h1",{staticClass:"text-jumbo text-ginormous"},[e._v(" Oops! ")]),a("h2",{staticClass:"mt-4"},[e._v("Unauthorized Page!")]),a("h2",[e._v("您没有权限访问该页面!")])]),a("el-col",{attrs:{span:12}},[a("img",{attrs:{src:e.errGif,width:"313",height:"428",alt:"Girl has dropped her ice cream."}})])],1)],1)},i=[],r=a("d9ae"),l=a.n(r),c={name:"Page401",data:function(){return{errGif:l.a+"?"+ +new Date}},methods:{back:function(){this.$route.query.noGoBack?this.$router.push({path:"/dashboard"}):this.$router.go(-1)}}},o=c,s=(a("cadb"),a("2877")),u=Object(s["a"])(o,n,i,!1,null,"2bd266d6",null);t["a"]=u.exports},"22a6":function(e,t,a){"use strict";var n=a("c523"),i=a.n(n);i.a},3803:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{attrs:{background:"",layout:e.pagerLayout,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})},i=[],r=a("750b"),l={name:"pagination",props:["pager","data","limitNumber"],setup:function(e,t){var a=t.emit,n=Object(r["a"])((function(){return e.data.length>=e.limitNumber?e.pager:"prev, pager, jumper, ->, total, slot"})),i=Object(r["f"])(),l=function(e){i.value=e,a("pagechange",e)};return{pagerLayout:n,currentPage:i,handleCurrentChange:l}}},c=l,o=a("2877"),s=Object(o["a"])(c,n,i,!1,null,null,null);t["a"]=s.exports},"50a2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.role?e._e():a("div",[a("Page401")],1),e.role?a("div",[a("div",[a("div",[a("div",{staticClass:"border pt-2 pb-2 pl-3",staticStyle:{"font-size":"18px","background-color":"#F0F3F4","border-radius":"3px"}},[a("span",{staticClass:"mb-3"},[e._v("投诉与建议")]),a("div",{staticClass:"float-right mr-3"},[a("el-input",{staticClass:"filter-item searchInputWidth",attrs:{type:"text",placeholder:"搜索","prefix-icon":"el-icon-search",clearable:""},on:{input:e.handleQuery},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1)])])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.tableData,expression:"!tableData"}],staticClass:"mt-5 mb-5"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!e.tableData,expression:"!tableData"}],staticClass:"borderRadius",attrs:{data:e.tableData,"highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{prop:"updatedAt",label:"更新时间",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("moment")(a.updatedAt,"timezone","Asia/Shanghai","YYYY-MM-DD HH:mm:ss"))+" ")]}}],null,!1,1905984471)}),a("el-table-column",{attrs:{prop:"email",label:"用户邮箱",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.email))])]}}],null,!1,1960383272)}),a("el-table-column",{attrs:{prop:"advice_type",label:"类型",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["投诉"===n.advice_type?a("span",{staticClass:"text-danger"},[e._v("投诉")]):e._e(),"建议"===n.advice_type?a("span",{staticClass:"text-danger"},[e._v("建议")]):e._e(),"其他"===n.advice_type?a("span",{staticClass:"text-danger"},[e._v("其他")]):e._e()]}}],null,!1,2813745437)}),a("el-table-column",{attrs:{prop:"advice_title",label:"标题",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.advice_title)+" ")]}}],null,!1,2053759740)}),a("el-table-column",{attrs:{prop:"advice_content",label:"内容",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.advice_content)+" ")]}}],null,!1,3942123925)}),a("el-table-column",{attrs:{prop:"evident_image",label:"投诉图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[n.evident_image.length>1?a("el-carousel",{attrs:{"indicator-position":"none",height:"150px"}},e._l(n.evident_image,(function(t,i){return a("el-carousel-item",{key:i},[a("img",{staticClass:"img-fluid pointer",attrs:{src:t.src},on:{click:function(t){return e.showMultiple(n,i)}}})])})),1):1===n.evident_image.length?a("el-image",{staticClass:"img-fluid",staticStyle:{height:"150px"},attrs:{src:n.evident_image[0].src,"preview-src-list":[n.evident_image[0].src],fit:"cover"}}):a("span",[e._v("暂无图片")]),a("vue-easy-lightbox",{attrs:{visible:e.lightboxVisible,imgs:e.img,index:e.index},on:{hide:e.handleHide}})],1)]}}],null,!1,360211587)}),a("el-table-column",{attrs:{prop:"adviceOperator",label:"操作人员",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.adviceOperator?a("span",{staticClass:"text-danger"},[e._v(e._s(n.adviceOperator))]):a("span",{staticClass:"text-info"},[e._v("无操作人员")])]}}],null,!1,552852977)}),a("el-table-column",{attrs:{align:"center",label:"操作/回复",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.advice_improvement?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("el-tag",{attrs:{type:"success"}},[e._v("回复:")])],1),a("div",{staticClass:"col-9"},[e._v(e._s(n.advice_improvement))])]),a("div",{staticClass:"mt-3"},[a("el-button",{attrs:{type:"warning",icon:"el-icon-sort"},on:{click:function(t){return e.handleUpdate(n)}}},[e._v("修改")])],1)]):a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.lockRowAdvice(n)}}},[e._v(" 回复 ")])],1)]}}],null,!1,426471312)})],1),a("pagination",{staticClass:"mt-5 float-right mb-5",attrs:{data:e.tableData,pager:"prev, pager, next, jumper, ->, total, slot",limitNumber:"5"},on:{pagechange:e.pageChange}}),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"请填写对本次投诉或建议的改进",visible:e.improvementSign,width:"400px",center:""},on:{"update:visible":function(t){e.improvementSign=t}}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入"},model:{value:e.advice_improvement,callback:function(t){e.advice_improvement=t},expression:"advice_improvement"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.improvementSign=!1}}},[e._v("取消")]),e.advice_improvement?a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdviceImprovement}},[e._v("确定")]):a("el-button",{attrs:{type:"primary",disabled:""}},[e._v("确定")])],1)],1)],1)]):e._e()])},i=[],r=a("1f2c"),l=a("750b"),c=a("3803"),o=a("6121"),s={components:{Page401:r["a"],pagination:c["a"]},setup:function(e,t){var a=t.root,n=a.$store,i=a.$message;Object(l["d"])((function(){n.dispatch("getAdminAdvice",{page:"0",size:5})}));var r=Object(l["f"])(!1),c=Object(l["c"])("reload"),s=Object(l["a"])((function(){return n.state.allAdminAdvice})),u=Object(l["a"])((function(){var e=[];return e=""!=w.value?x.value:s.value,e.map((function(e){return{updatedAt:e.updatedAt,email:e.email,advice_type:e.advice_type,advice_title:e.advice_title,advice_content:e.advice_content,evident_image:e.evident_image.map((function(e){return{src:o["a"]+e}})),advice_improvement:e.advice_improvement,_id:e._id,adviceOperator:e.adviceOperator}}))})),d=Object(l["a"])((function(){return"Admin/管理员"===n.state.role})),v=Object(l["f"])(!1),p=Object(l["f"])(""),m=Object(l["f"])(""),g=function(e){v.value=!0,m.value=e._id},f=function(){var e={adviceId:m.value,advice_improvement:p.value,adviceOperator:n.state.userSelf.username};""===e.advice_improvement?i.error("请填写回复信息！"):(r.value=!0,n.dispatch("updateAdvice",e).then((function(){i.success("投诉建议回复成功！"),r.value=!1,c()})).catch((function(){r.value=!1})))},b=Object(l["f"])(!1),_=Object(l["f"])(0),h=Object(l["f"])(""),y=function(){b.value=!1},k=function(e,t){b.value=!0,h.value=e.evident_image,_.value=t},w=Object(l["f"])(""),x=Object(l["f"])([]),C=function(){var e={keyword:{searchString:w.value},page:"0",size:5};n.dispatch("searchAdminAdvice",e).then((function(e){x.value=e.data})).catch((function(){}))},O=function(e){""===w.value?n.dispatch("getAdminAdvice",{page:e-1,size:5}):n.dispatch("searchAdminAdvice",{keyword:{searchString:w.value},page:e-1,size:5}).then((function(e){x.value=e.data})).catch((function(){}))},j=function(e){v.value=!0,m.value=e._id,p.value=e.advice_improvement};return{loading:r,role:d,pageChange:O,tableData:u,lockRowAdvice:g,improvementSign:v,advice_improvement:p,handleAdviceImprovement:f,lightboxVisible:b,img:h,index:_,showMultiple:k,handleHide:y,keyWord:w,handleQuery:C,handleUpdate:j}}},u=s,d=(a("22a6"),a("2877")),v=Object(d["a"])(u,n,i,!1,null,null,null);t["default"]=v.exports},c523:function(e,t,a){},cadb:function(e,t,a){"use strict";var n=a("e5c3"),i=a.n(n);i.a},d9ae:function(e,t,a){e.exports=a.p+"img/401.089007e7.gif"},e5c3:function(e,t,a){}}]);
//# sourceMappingURL=chunk-99c33f34.a06f7e29.js.map