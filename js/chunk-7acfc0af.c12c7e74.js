(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7acfc0af"],{3803:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{attrs:{background:"",layout:e.pagerLayout,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})},n=[],s=a("750b"),l={name:"pagination",props:["pager","data","limitNumber"],setup:function(e,t){var a=t.emit,r=Object(s["a"])((function(){return e.data.length>=e.limitNumber?e.pager:"prev, pager, jumper, ->, total, slot"})),n=Object(s["f"])(),l=function(e){n.value=e,a("pagechange",e)};return{pagerLayout:r,currentPage:n,handleCurrentChange:l}}},o=l,i=a("2877"),u=Object(i["a"])(o,r,n,!1,null,null,null);t["a"]=u.exports},"91d4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mt-5"},[a("el-breadcrumb",{staticClass:"border el-breadcrumb-outer",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{staticClass:"mt-3 ml-3"},[e._v("所有商品")]),a("el-breadcrumb-item",{staticClass:"mt-3"},[a("span",{staticStyle:{color:"#f39c12"}},[a("i",{staticClass:"fas fa-shipping-fast"}),e._v(" 退货中")])]),a("div",{staticClass:"float-right mt-2 mr-3"},[a("el-input",{staticClass:"filter-item searchInputWidth",attrs:{type:"text",placeholder:"搜索","prefix-icon":"el-icon-search",clearable:""},on:{input:e.handleQuery},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1)],1),a("el-table",{staticClass:"borderRadius mt-5",attrs:{data:e.allReturnGoods,border:"","default-sort":{prop:"user_id",order:"ascending"}}},[a("el-table-column",{attrs:{prop:"_id",label:"货物号",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a._id.substr(-10))+" ")]}}])}),a("el-table-column",{attrs:{prop:"username",label:"会员名称",align:"center",sortable:""}}),a("el-table-column",{attrs:{prop:"goodName",label:"货品名称",align:"center",sortable:""}}),a("el-table-column",{attrs:{label:"退货地址",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",[e._v("地址: "+e._s(r.returnShippingAddress))]),a("div",[e._v("城市: "+e._s(r.returnShippingCity))]),a("div",[e._v("省份: "+e._s(r.returnShippingProvince))]),a("div",[e._v("国家: "+e._s(r.returnShippingCountry))]),a("div",[e._v("邮编: "+e._s(r.returnShippingPostcode))])]}}])}),a("el-table-column",{attrs:{prop:"returnShippingRecevier",label:"联系人",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.returnShippingRecevier)+" ")]}}])}),a("el-table-column",{attrs:{prop:"returnShippingPhone",label:"联系电话",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.returnShippingPhone)+" ")]}}])}),a("el-table-column",{attrs:{prop:"returnShippingPhone",label:"快递备注",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.returnShippingNotes?a("div",[e._v(" "+e._s(r.returnShippingNotes)+" ")]):a("div",[a("el-tag",[e._v("无快递备注")])],1)]}}])}),a("el-table-column",{attrs:{label:"更新时间",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("moment")(a.updatedAt,"timezone","Asia/Shanghai","YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("el-table-column",{attrs:{prop:"goodStatus",label:"货物状态",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["退货中"===r.goodStatus?a("span",{staticClass:"text-danger"},[e._v(e._s(r.goodStatus))]):a("span",{staticClass:"text-success"},[e._v(e._s(r.goodStatus))])]}}])}),a("el-table-column",{attrs:{prop:"goodReturnOperator",label:"操作人员",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.goodReturnOperator?a("span",{staticClass:"text-danger"},[e._v(e._s(r.goodReturnOperator))]):a("span",{staticClass:"text-info"},[e._v("无操作人员")])]}}])}),a("el-table-column",{attrs:{label:"操作/状态",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",{staticClass:"mt-2"},["退货中"===r.goodStatus&&0==r.returnPayMethod?a("span",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUpdate(r)}}},[e._v(" 直接退货 ")]),a("p",{staticClass:"mt-2"},[e._v(" 退货付款方式: "),a("span",{staticClass:"text-success"},[e._v("到付")])])],1):"退货中"===r.goodStatus&&1==r.returnPayMethod?a("div",[a("span",[r.IsPayed||r.returnShippingPrice?!r.IsPayed&&r.returnShippingPrice?a("span",{staticClass:"text-success"},[a("p",[e._v("等待用户付款中")]),a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.updateShippingPrice(r)}}},[e._v("修改快递价格")])],1):a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUpdate(r)}}},[e._v(" 填写快递(已付款) ")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUpdate(r)}}},[e._v(" 填写价格(未付款) ")])],1),a("p",{staticClass:"mt-2"},[e._v(" 退货付款方式: "),a("span",{staticClass:"text-success"},[e._v("自付")])]),r.returnShippingPrice?a("p",{staticClass:"mt-2"},[e._v(" 退货快递价格: "),a("span",{staticClass:"text-danger"},[e._v(e._s(r.returnShippingPrice))])]):e._e()]):"已退货"===r.goodStatus?a("div",[a("p",{staticClass:"mt-2"},[e._v(" 快递公司: "),a("span",{staticClass:"text-success"},[e._v(e._s(r.returnExpressCompany))])]),a("p",{staticClass:"mt-2"},[e._v(" 快递号码: "),a("span",{staticClass:"text-success"},[e._v(e._s(r.returnExpressNumber))])]),0==r.returnPayMethod?a("p",{staticClass:"mt-2"},[e._v(" 退货付款方式: "),a("span",{staticClass:"text-success"},[e._v("到付")])]):e._e(),1==r.returnPayMethod?a("p",[e._v(" 退货付款方式: "),a("span",{staticClass:"text-success"},[e._v("自付")])]):e._e(),a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.updateExpressInfo(r)}}},[e._v("修改快递信息")])],1):e._e()])]}}])})],1),a("pagination",{staticClass:"mt-5 mb-5 float-right",attrs:{data:e.allReturnGoods,pager:"prev, pager, next, jumper, ->, total, slot",limitNumber:"5"},on:{pagechange:e.pageChange}}),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"货物入库信息",visible:e.switchEditSign,center:"",width:"420px"},on:{"update:visible":function(t){e.switchEditSign=t}}},[a("el-form",{attrs:{model:e.adminHandleForm,"label-position":"left","label-width":"120px"}},[!0===e.priceFormSign?a("el-form-item",{attrs:{label:"*退货快递价格:"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.adminHandleForm.returnShippingPrice,callback:function(t){e.$set(e.adminHandleForm,"returnShippingPrice",t)},expression:"adminHandleForm.returnShippingPrice"}})],1):e._e(),!0===e.priceFormSign?a("el-form-item",{attrs:{label:"*退货成本价格:"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.adminHandleForm.returnShippingCostPrice,callback:function(t){e.$set(e.adminHandleForm,"returnShippingCostPrice",t)},expression:"adminHandleForm.returnShippingCostPrice"}})],1):e._e(),!0===e.completeFormSign||!0===e.expressFormSign?a("el-form-item",{attrs:{label:"*快递公司:"}},[a("el-select",{attrs:{placeholder:"请选择快递公司",autocomplete:"off"},model:{value:e.adminHandleForm.returnExpressCompany,callback:function(t){e.$set(e.adminHandleForm,"returnExpressCompany",t)},expression:"adminHandleForm.returnExpressCompany"}},e._l(e.expressoptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),!0===e.completeFormSign||!0===e.expressFormSign?a("el-form-item",{attrs:{label:"*快递单号:"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.adminHandleForm.returnExpressNumber,callback:function(t){e.$set(e.adminHandleForm,"returnExpressNumber",t)},expression:"adminHandleForm.returnExpressNumber"}})],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.switchEditSign=!1,e.completeFormSign=!1,e.priceFormSign=!1,e.expressFormSign=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitExpressInfo}},[e._v("确认")])],1)],1)],1)},n=[],s=a("750b"),l=a("3803"),o={name:"stockpendinglist",components:{pagination:l["a"]},setup:function(e,t){var a=t.root,r=a.$store,n=a.$message,l=Object(s["f"])(""),o=Object(s["f"])(!1),i=Object(s["c"])("reload"),u=Object(s["f"])(!1);Object(s["d"])((function(){r.dispatch("getAllGoods",{status:"退货中",page:"0",size:"5"})}));var c=Object(s["e"])({returnedGoods:[],returnShippingPrice:"",returnShippingCostPrice:"",returnExpressCompany:"",returnExpressNumber:"",goodReturnOperator:r.state.userSelf.username}),p=Object(s["e"])([{value:"中国邮政",label:"中国邮政"},{value:"顺丰速运",label:"顺丰速运"},{value:"圆通快递",label:"圆通快递"},{value:"申通快递",label:"申通快递"},{value:"韵达快递",label:"韵达快递"},{value:"汇通快递",label:"汇通快递"},{value:"中通快递",label:"中通快递"},{value:"宅急送",label:"宅急送"},{value:"天天快递",label:"天天快递"},{value:"其他：",label:"其他"}]),d=Object(s["f"])(!1),m=Object(s["f"])(!1),v=Object(s["f"])(!1),g=function(e){0==e.returnPayMethod?d.value=!0:1!=e.returnPayMethod||e.IsPayed?v.value=!0:m.value=!0,o.value=!0,c.returnedGoods.push(e._id)},f=function(e){m.value=!0,o.value=!0,c.returnedGoods.push(e._id),c.returnShippingPrice=e.returnShippingPrice},b=function(e){v.value=!0,o.value=!0,c.returnedGoods.push(e._id),c.returnExpressCompany=e.returnExpressCompany,c.returnExpressNumber=e.returnExpressNumber},h=function(){!1===d.value&&!0===m.value&&!1===v.value?""===c.returnShippingPrice?n.error("请填写退货快递价格"):""===c.returnShippingCostPrice?n.error("请填写退货成本价格"):(o.value=!1,d.value=!1,m.value=!1,v.value=!1,u.value=!0,r.dispatch("submitReturnGoodsInfo",c).then((function(){n.success("退货信息更新成功！"),u.value=!1,i()})).catch((function(){u.value=!1}))):!1===d.value&&!1===m.value&&!0===v.value?""===c.returnExpressCompany||""===c.returnExpressNumber?n.error("请填写退货快递信息"):(o.value=!1,d.value=!1,m.value=!1,v.value=!1,u.value=!0,r.dispatch("submitReturnGoods",c).then((function(){n.success("退货信息更新成功！"),u.value=!1,i()})).catch((function(){u.value=!1}))):!0===d.value&&!1===m.value&&!1===v.value&&(""===c.returnShippingPrice||""===c.returnExpressCompany||""===c.returnExpressNumber?n.error("请填写退货快递信息"):(o.value=!1,d.value=!1,m.value=!1,v.value=!1,u.value=!0,r.dispatch("submitReturnGoods",c).then((function(){n.success("退货信息更新成功！"),u.value=!1,i()})).catch((function(){u.value=!1}))))},_=Object(s["a"])((function(){return r.state.allGoods})),S=Object(s["a"])((function(){var e=[];return e=""!=x.value?y.value:_.value,e})),x=Object(s["f"])(""),y=Object(s["f"])([]),C=function(){var e={keyword:{searchString:x.value},status:"退货中",page:"0",size:"5"};r.dispatch("searchGoods",e).then((function(e){y.value=e.data})).catch((function(){}))},P=function(e){""===x.value?r.dispatch("getAllGoods",{status:"退货中",page:e-1,size:"5"}):r.dispatch("searchGoods",{keyword:{searchString:x.value},status:"退货中",page:e-1,size:"5"}).then((function(e){y.value=e.data})).catch((function(){}))};return{loading:u,keyWord:x,handleQuery:C,pageChange:P,goodName:l,switchEditSign:o,adminHandleForm:c,handleUpdate:g,expressoptions:p,completeFormSign:d,priceFormSign:m,expressFormSign:v,updateShippingPrice:f,updateExpressInfo:b,allReturnGoods:S,submitExpressInfo:h}}},i=o,u=(a("f47e"),a("2877")),c=Object(u["a"])(i,r,n,!1,null,null,null);t["default"]=c.exports},d44eb:function(e,t,a){},f47e:function(e,t,a){"use strict";var r=a("d44eb"),n=a.n(r);n.a}}]);
//# sourceMappingURL=chunk-7acfc0af.c12c7e74.js.map