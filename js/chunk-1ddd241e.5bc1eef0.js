(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ddd241e"],{"48d3":function(e,t,s){"use strict";var a=s("d352"),i=s.n(a);i.a},"5dbb":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{"margin-left":"1%",width:"98%"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-6 col-xl-4"},[s("el-card",{staticStyle:{"border-radius":"3px",height:"auto"},attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[s("div",{staticClass:"border-bottom pt-2 pb-2 pl-3",staticStyle:{"font-size":"18px","background-color":"#F0F3F4"}},[s("span",{staticClass:"mb-3"},[e._v("个人资料")])]),s("div",{staticClass:"ml-3 mt-3 row"},[s("div",{staticClass:"img_div",staticStyle:{width:"100px"}},[s("img",{staticClass:"uploadhover mb-3 border",staticStyle:{width:"90px",height:"90px","object-fit":"cover","border-radius":"50%"},attrs:{src:e.userAvatar}}),s("a",{on:{click:e.openUploadDialog}},[s("div",{staticClass:"mask"})])]),s("span",{staticClass:"ml-2",staticStyle:{width:"calc(100%-100px;)"}},[s("p",{staticClass:"mt-4",staticStyle:{"font-size":"17px"}},[e._v(" "+e._s(e.UserInfo.username)+" ")]),s("p",{staticStyle:{"font-size":"16px",color:"gray"}},[s("i",{staticClass:"fas fa-medal"},[e._v(" "+e._s(e.UserInfo.level))])])])]),s("uploadavatar"),s("div",{staticClass:"border-top"},[s("div",{staticClass:"ml-3 mr-3 mt-3"},[s("el-collapse-transition",[s("el-form",{directives:[{name:"show",rawName:"v-show",value:!1===e.formEdit,expression:"formEdit === false"}],ref:"ruleForm",attrs:{model:e.ruleForm,"label-position":"left","label-width":"110px"}},[s("el-form-item",{attrs:{label:"用户邮箱"}},[e._v(" "+e._s(e.UserInfo.email)+" ")]),s("el-form-item",{attrs:{label:"用户名"}},[e._v(" "+e._s(e.UserInfo.username)+" ")]),s("el-form-item",{attrs:{label:"出生日期"}},[e._v(" "+e._s(e._f("moment")(e.UserInfo.birthday,"YYYY-MM-DD"))+" ")]),s("el-form-item",{attrs:{label:"性别"}},["female"===e.UserInfo.gender?s("div",[e._v("女")]):s("div",[e._v("男")])]),s("el-form-item",{attrs:{label:"联系电话"}},[e._v(" "+e._s(e.UserInfo.phoneNumber)+" ")]),s("el-form-item",{attrs:{label:"微信"}},[e._v(" "+e._s(e.UserInfo.weixin)+" ")]),s("el-form-item",{attrs:{label:"QQ"}},[e._v(" "+e._s(e.UserInfo.qq)+" ")]),s("div",{staticClass:"mb-4 text-center"},[s("el-button",{attrs:{icon:"el-icon-edit",type:"primary"},on:{click:e.editInfo}},[e._v("编辑")]),s("el-button",{attrs:{icon:"el-icon-upload2",type:"warning"},on:{click:e.openUploadDialog}},[e._v("上传头像")])],1)],1)],1),s("el-collapse-transition",[s("el-form",{directives:[{name:"show",rawName:"v-show",value:!0===e.formEdit,expression:"formEdit === true"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",attrs:{model:e.ruleForm,"label-position":"left","label-width":"120px"}},[s("el-form-item",{attrs:{label:"用户邮箱:",prop:"email"}},[s("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),s("el-form-item",{attrs:{label:"用户名:",prop:"username"}},[s("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),s("el-form-item",{attrs:{label:"出生日期:",prop:"birthday"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"请选择生日"},model:{value:e.ruleForm.birthday,callback:function(t){e.$set(e.ruleForm,"birthday",t)},expression:"ruleForm.birthday"}})],1),s("el-form-item",{attrs:{label:"性别:",prop:"gender"}},[s("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}},[s("el-option",{attrs:{label:"男",value:"male"}}),s("el-option",{attrs:{label:"女",value:"female"}})],1)],1),s("el-form-item",{attrs:{label:"联系电话:",prop:"phoneNumber"}},[s("el-input",{model:{value:e.ruleForm.phoneNumber,callback:function(t){e.$set(e.ruleForm,"phoneNumber",t)},expression:"ruleForm.phoneNumber"}})],1),s("el-form-item",{attrs:{label:"微信:",prop:"weixin"}},[s("el-input",{model:{value:e.ruleForm.weixin,callback:function(t){e.$set(e.ruleForm,"weixin",t)},expression:"ruleForm.weixin"}})],1),s("el-form-item",{attrs:{label:"QQ:",prop:"qq"}},[s("el-input",{model:{value:e.ruleForm.qq,callback:function(t){e.$set(e.ruleForm,"qq",t)},expression:"ruleForm.qq"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("更新")]),s("el-button",{on:{click:e.editInfo}},[e._v("取消")])],1)],1)],1)],1)])],1)],1),s("div",{staticClass:"col-12 col-md-6 col-xl-4 mb-5"},[s("el-card",{staticStyle:{"border-radius":"3px","min-height":"154px"},attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[s("div",{staticClass:"border-bottom pt-2 pb-2 pl-3",staticStyle:{"font-size":"18px","background-color":"#F0F3F4"}},[s("span",{staticClass:"mb-3"},[e._v("地址信息")]),s("el-button",{staticClass:"float-right mr-1",attrs:{icon:"el-icon-edit",type:"primary"},on:{click:function(t){e.newAddressSign=!0}}},[e._v("添加")])],1),s("div",{staticClass:"mt-4",staticStyle:{"font-size":"17px"}},[s("el-collapse-transition",[!0===e.newAddressSign||!0===e.modifyAddressSign?s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"border-bottom"},[s("el-form",{staticClass:"ml-3 mr-3 pt-4 pb-4",attrs:{model:e.newAddressForm,"label-position":"left","label-width":"80px"}},[s("el-form-item",{attrs:{label:"国家"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.newAddressForm.ShippingCountry,callback:function(t){e.$set(e.newAddressForm,"ShippingCountry",t)},expression:"newAddressForm.ShippingCountry"}})],1),s("el-form-item",{attrs:{label:"省份"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.newAddressForm.ShippingProvince,callback:function(t){e.$set(e.newAddressForm,"ShippingProvince",t)},expression:"newAddressForm.ShippingProvince"}})],1),s("el-form-item",{attrs:{label:"城市"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.newAddressForm.ShippingCity,callback:function(t){e.$set(e.newAddressForm,"ShippingCity",t)},expression:"newAddressForm.ShippingCity"}})],1),s("el-form-item",{attrs:{label:"地址"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.newAddressForm.ShippingAddress,callback:function(t){e.$set(e.newAddressForm,"ShippingAddress",t)},expression:"newAddressForm.ShippingAddress"}})],1),s("el-form-item",{attrs:{label:"邮编"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.newAddressForm.ShippingPostcode,callback:function(t){e.$set(e.newAddressForm,"ShippingPostcode",t)},expression:"newAddressForm.ShippingPostcode"}})],1),s("el-form-item",{attrs:{label:"姓名"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.newAddressForm.shippingRecevier,callback:function(t){e.$set(e.newAddressForm,"shippingRecevier",t)},expression:"newAddressForm.shippingRecevier"}})],1),s("el-form-item",{attrs:{label:"电话"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.newAddressForm.shippingPhone,callback:function(t){e.$set(e.newAddressForm,"shippingPhone",t)},expression:"newAddressForm.shippingPhone"}})],1),s("div",{staticClass:"text-center"},[s("el-button",{attrs:{type:"primary"},on:{click:e.addNewAddress}},[e._v("确定")]),s("el-button",{on:{click:function(t){e.newAddressSign=!1,e.modifyAddressSign=!1}}},[e._v("取消")])],1)],1)],1):e._e()]),void 0!==!e.UserAddressArray&&0==e.UserAddressArray.length&&0==e.newAddressSign?s("div",{staticClass:"mt-5 text-center"},[e._v(" 您的地址信息为空 ")]):s("div",{staticClass:"mb-4 mt-4 pl-3 pr-3"},[s("el-collapse",{attrs:{accordion:""}},e._l(e.UserAddressArray,(function(t,a){return s("el-collapse-item",{key:a},[s("template",{staticStyle:{height:"100px"},slot:"title"},[s("i",{staticClass:"fas fa-address-card text-info mr-2 fa-lg"}),e._v(" 地址: "+e._s(t.ShippingAddress)+" ")]),s("div",{staticClass:"ml-3 mr-3",staticStyle:{"font-size":"15px"}},[s("p",[s("i",{staticClass:"fas fa-globe mr-2 text-success"}),e._v(" 国家/省份: "+e._s(t.ShippingCountry)+", "+e._s(t.ShippingProvince)+" ")]),s("p",[s("i",{staticClass:"fas fa-city text-success mr-2"}),e._v("城市: "+e._s(t.ShippingCity)+" ")]),s("p",[s("i",{staticClass:"fas fa-map-marked-alt  text-success mr-2"}),e._v("详细地址: "+e._s(t.ShippingAddress)+" ")]),s("p",[s("i",{staticClass:"fas fa-arrows-alt  text-success mr-2"}),e._v(" 邮编: "+e._s(t.ShippingPostcode)+" ")]),s("p",[s("i",{staticClass:"fas fa-address-book  text-success mr-2"}),e._v(" 联系信息: "+e._s(t.shippingRecevier)+", "+e._s(t.shippingPhone)+" ")]),s("div",{staticClass:"text-center mt-4"},[s("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.modifyAddress(a)}}},[e._v("修改")]),s("el-button",{attrs:{type:"info"},on:{click:function(t){return e.deleteAddress(a)}}},[e._v("删除")])],1)])],2)})),1)],1)],1)])],1),s("div",{staticClass:"col-12 col-md-6 col-xl-4 mb-5"},[s("el-card",{staticStyle:{"border-radius":"3px"},attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[s("div",{staticClass:"border-bottom pt-2 pb-2 pl-3",staticStyle:{"font-size":"18px","background-color":"#F0F3F4"}},[s("span",{staticClass:"mb-3"},[e._v("账户信息")])]),s("div",{staticClass:"mt-4 row"},[s("div",{staticClass:"col-7 ml-3"},[s("p",[s("i",{staticClass:"fas fa-coins"}),e._v(" 账户余额: "),s("span",{staticClass:"text-danger ml-1 mr-1"},[e._v(e._s(e.userAccountBalance))]),e._v(" 元")]),s("p",[s("i",{staticClass:"fas fa-star-half-alt"}),e._v(" 账户积分: ***")])]),s("div",{staticClass:"col-4"},[s("el-button",{attrs:{type:"warning"},nativeOn:{click:function(t){return e.clickToInputAmount(t)}}},[e._v("充值")])],1)])])],1)]),s("el-dialog",{attrs:{title:"账户充值",visible:e.inputAmountSign,width:"400px",center:""},on:{"update:visible":function(t){e.inputAmountSign=t}}},[!1===e.scanQRCode?s("div",[s("span",{staticClass:"text-center ml-3",staticStyle:{"font-size":"16px"}},[s("span",{staticClass:"text-danger"},[e._v("请输入充值金额:")]),s("el-input-number",{staticClass:"ml-3",staticStyle:{width:"170px"},attrs:{step:10,min:1,max:1/0},model:{value:e.inputAmount,callback:function(t){e.inputAmount=t},expression:"inputAmount"}})],1),s("div",{staticClass:"text-center mt-5"},[s("el-button",{on:{click:function(t){e.inputAmountSign=!1}}},[e._v("取消")]),s("el-button",{attrs:{type:"warning"},on:{click:function(t){e.scanQRCode=!0}}},[e._v("确定充值")])],1)]):e._e(),!0===e.scanQRCode?s("div",[s("div",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[s("i",{staticClass:"fas fa-bell mr-2"}),e._v("请扫描微信或支付宝二维码支付 ")]),s("el-tabs",{staticClass:"mt-3",attrs:{type:"border-card"}},[s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"fab fa-weixin text-success"}),e._v(" 微信")]),s("el-image",{staticStyle:{width:"90%","margin-left":"5%"},attrs:{src:"/images/weixinCode.png",fit:"fill"}})],1),s("el-tab-pane",[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"fab fa-alipay text-primary"}),e._v(" 支付宝")]),s("el-image",{staticStyle:{width:"90%","margin-left":"5%"},attrs:{src:"https://cdn.pixabay.com/photo/2013/07/12/14/45/qr-code-148732_1280.png",fit:"fill"}})],1)],1),s("div",{staticClass:"text-center mt-5"},[s("el-button",{on:{click:function(t){e.scanQRCode=!1}}},[e._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.submitSaveAmount}},[e._v("确定")])],1)],1):e._e()])],1)},i=[],l=s("750b"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"请更新头像",visible:e.visible,width:"300px","before-close":e.closeDialog},on:{"update:visible":function(t){e.visible=t}}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://upload-z2.qiniup.com",data:e.token,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?s("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" *上传照片只支持PNG，GIF，JPEG 和 JPG格式，大小不超过1MB。 ")])]),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.uploadAvatar(t)}}},[e._v("确定")])],1)],1)},r=[],o=s("6121"),c={setup:function(e,t){var s=t.root,a=s.$store,i=s.$message,n=Object(l["f"])(""),r=Object(l["f"])(""),c=Object(l["c"])("reload"),p=Object(l["a"])((function(){return a.state.dialogVisible})),d=Object(l["a"])((function(){return a.state.token})),u=function(e){a.dispatch("getUpToken");var t=!0,s=["image/gif","image/jpeg","image/jpg","image/png"],l=e.size/1024/1024<1;return-1==s.indexOf(e.type)?(i.error("文件格式应是图片！"),t=!1):l||(i.error("图片大小超过1MB了！"),t=!1),t},m=function(e){a.dispatch("getUpToken").then((function(){r.value=e.key,n.value=o["a"]+e.key}))},f=function(){var e={avatar:r.value};a.dispatch("avatarUpload",e).then((function(){i.success("头像上传成功！"),a.commit("openDialog",!1),c()})).catch((function(){}))},v=function(){a.commit("openDialog",!1)};return{imageUrl:n,beforeAvatarUpload:u,handleAvatarSuccess:m,uploadAvatar:f,closeDialog:v,visible:p,token:d}}},p=c,d=(s("a0cc"),s("2877")),u=Object(d["a"])(p,n,r,!1,null,null,null),m=u.exports,f={components:{uploadavatar:m},setup:function(e,t){var s=t.root,a=s.$store,i=s.$message,n=s.$confirm;Object(l["d"])((function(){a.dispatch("getUserInfo")}));var r=Object(l["f"])(!1),c=Object(l["c"])("reload"),p=Object(l["a"])((function(){return a.state.userSelf})),d=Object(l["a"])((function(){return o["a"]+p.value.avatar})),u=Object(l["a"])((function(){return p.value.address})),m=Object(l["a"])((function(){return a.state.userSelf.balance})),f=function(){a.commit("openDialog",!0)},v=Object(l["f"])(!1),b=Object(l["f"])(!1),h=Object(l["e"])({ShippingCountry:"",ShippingProvince:"",ShippingCity:"",ShippingAddress:"",ShippingPostcode:"",shippingPhone:"",shippingRecevier:""}),g=function(){if(""===h.ShippingCountry||""===h.ShippingProvince||""===h.ShippingCity||""===h.ShippingAddress||""===h.ShippingPostcode||""===h.shippingPhone||""===h.shippingRecevier)i.error("请输入完整信息！");else if(!0===v.value){u.value.push(h);var e={address:u.value};r.value=!0,a.dispatch("updateUserInfo",e).then((function(){i.success("添加新地址成功！"),r.value=!1,c()})).catch((function(){r.value=!1}))}else if(!0===b.value){u.value.splice(x.value,1),u.value.push(h);var t={address:u.value};r.value=!0,a.dispatch("updateUserInfo",t).then((function(){i.success("地址更新成功！"),r.value=!1,c()})).catch((function(){r.value=!1}))}},y=function(e){n("确定删除地址?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r.value=!0,u.value.splice(e,1);var t={address:u.value};a.dispatch("updateUserInfo",t).then((function(){i.success("删除地址成功！"),r.value=!1,c()})).catch((function(){r.value=!1}))})).catch((function(){i({type:"info",message:"取消"})}))},x=Object(l["f"])(""),w=function(e){b.value=!0,h.ShippingCountry=u.value[e].ShippingCountry,h.ShippingProvince=u.value[e].ShippingProvince,h.ShippingCity=u.value[e].ShippingCity,h.ShippingAddress=u.value[e].ShippingAddress,h.ShippingPostcode=u.value[e].ShippingPostcode,h.shippingPhone=u.value[e].shippingPhone,h.shippingRecevier=u.value[e].shippingRecevier,x.value=e},S=Object(l["e"])({email:p.value.email,username:p.value.username,birthday:p.value.birthday,phoneNumber:p.value.phoneNumber,gender:p.value.gender,weixin:p.value.weixin,qq:p.value.qq}),C=Object(l["f"])(!1),A=Object(l["f"])(!0),_=function(){C.value=!C.value},F=function(){A.value=!A.value},k=function(){""===S.username?i.error("用户名不能为空"):(r.value=!0,a.dispatch("updateUserInfo",S).then((function(){i.success("基本信息更新成功！"),r.value=!1,a.dispatch("getUserInfo")})).catch((function(){r.value=!1})))},U=Object(l["f"])(!1),j=function(){U.value=!0},O=Object(l["f"])(0),P=Object(l["f"])(!1),I=function(){var e={rechargeBalance:O.value};a.dispatch("rechargeAccount",e).then((function(){i.success("账户充值成功！"),U.value=!1,P.value=!1,c()})).catch((function(){r.value=!1}))};return{loading:r,UserInfo:p,userAvatar:d,UserAddressArray:u,newAddressSign:v,newAddressForm:h,addNewAddress:g,deleteAddress:y,modifyAddress:w,modifyAddressSign:b,openUploadDialog:f,ruleForm:S,submitForm:k,formEdit:C,editInfo:_,passwordhide:A,switchpsw:F,userAccountBalance:m,inputAmountSign:U,clickToInputAmount:j,inputAmount:O,scanQRCode:P,submitSaveAmount:I}}},v=f,b=(s("48d3"),Object(d["a"])(v,a,i,!1,null,null,null));t["default"]=b.exports},"759b":function(e,t,s){},a0cc:function(e,t,s){"use strict";var a=s("759b"),i=s.n(a);i.a},d352:function(e,t,s){}}]);
//# sourceMappingURL=chunk-1ddd241e.5bc1eef0.js.map