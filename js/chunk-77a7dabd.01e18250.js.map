{"version":3,"sources":["webpack:///./src/views/admin/components/InfoPagination.vue?b392","webpack:///src/views/admin/components/InfoPagination.vue","webpack:///./src/views/admin/components/InfoPagination.vue?95de","webpack:///./src/views/admin/components/InfoPagination.vue","webpack:///./src/views/admin/administration/orderTurnover.vue?a4df","webpack:///src/views/admin/administration/orderTurnover.vue","webpack:///./src/views/admin/administration/orderTurnover.vue?802d","webpack:///./src/views/admin/administration/orderTurnover.vue","webpack:///./src/views/admin/administration/orderTurnover.vue?b594"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","pagerLayout","currentPage","on","handleCurrentChange","$event","staticRenderFns","name","props","setup","pager","value","val","emit","component","staticClass","staticStyle","_v","handleQuery","model","callback","$$v","keyWord","expression","pickerOptions","dateDuration","downloadLoading","handleDownload","slot","tableData","prop","order","scopedSlots","_u","key","fn","ref","row","_s","username","id","substr","_f","createdAt","orderRealWeight","incomePrice","costPrice","orderStatus","shippingTime","status","compensation","orderProfit","pageChange","components","pagination","$store","dispatch","page","size","status1","state","orderlist","data","returnData","orderList","map","object","_id","date","updatedAt","keyword","jsonData","j","v","$moment","orderTurnoverData","shortcuts"],"mappings":"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","file":"js/chunk-77a7dabd.01e18250.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-pagination',{attrs:{\"background\":\"\",\"layout\":_vm.pagerLayout,\"current-page\":_vm.currentPage},on:{\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-pagination\r\n    background\r\n    :layout=\"pagerLayout\"\r\n    @current-change=\"handleCurrentChange\"\r\n    :current-page.sync=\"currentPage\"\r\n  >\r\n  </el-pagination>\r\n</template>\r\n\r\n<script>\r\nimport { computed, ref } from \"@vue/composition-api\";\r\nexport default {\r\n  name: \"pagination\",\r\n  props: [\"pager\", \"data\", \"limitNumber\"],\r\n  setup(props, { emit }) {\r\n    //fetch pager from props\r\n    const pagerLayout = computed(() => {\r\n      if(props.data.length >= props.limitNumber){\r\n        return props.pager;\r\n      }\r\n      else{\r\n        return \"prev, pager, jumper, ->, total, slot\";\r\n      }\r\n    });\r\n    //the current page number\r\n    const currentPage = ref();\r\n    //handle the page change \r\n    const handleCurrentChange = val => {\r\n      currentPage.value = val\r\n      emit(\"pagechange\", val);\r\n    };\r\n    return {\r\n      pagerLayout,\r\n      currentPage,\r\n      handleCurrentChange\r\n    };\r\n  }\r\n};\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoPagination.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoPagination.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InfoPagination.vue?vue&type=template&id=9e0afd92&\"\nimport script from \"./InfoPagination.vue?vue&type=script&lang=js&\"\nexport * from \"./InfoPagination.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('div',{staticClass:\"border pt-2 pb-2 pl-3\",staticStyle:{\"font-size\":\"18px\",\"background-color\":\"#F0F3F4\",\"border-radius\":\"3px\"}},[_c('span',{staticClass:\"mb-3\"},[_vm._v(\"订单流水\")]),_c('div',{staticClass:\"float-right mr-3\"},[_c('el-input',{staticClass:\"filter-item searchInputWidth\",attrs:{\"type\":\"text\",\"placeholder\":\"搜索\",\"prefix-icon\":\"el-icon-search\",\"clearable\":\"\"},on:{\"input\":_vm.handleQuery},model:{value:(_vm.keyWord),callback:function ($$v) {_vm.keyWord=$$v},expression:\"keyWord\"}})],1),_c('el-popover',{staticClass:\"float-right mr-3\",attrs:{\"placement\":\"bottom\",\"title\":\"选择导出时间\",\"width\":\"370\",\"trigger\":\"click\"}},[_c('div',[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"align\":\"right\",\"unlink-panels\":\"\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"picker-options\":_vm.pickerOptions},model:{value:(_vm.dateDuration),callback:function ($$v) {_vm.dateDuration=$$v},expression:\"dateDuration\"}}),_c('el-button',{staticClass:\"float-right mt-3 pl-4 pr-4\",attrs:{\"loading\":_vm.downloadLoading,\"type\":\"primary\"},on:{\"click\":_vm.handleDownload}},[_vm._v(\" 导出 \")])],1),_c('el-button',{attrs:{\"slot\":\"reference\",\"icon\":\"el-icon-document\",\"type\":\"primary\"},slot:\"reference\"},[_vm._v(\"Excel导出\")])],1)],1),_c('div',{staticClass:\"mt-5\"},[_c('el-table',{staticClass:\"borderRadius\",attrs:{\"data\":_vm.tableData,\"highlight-current-row\":\"\",\"border\":\"\",\"default-sort\":{ prop: 'createdAt', order: 'descending' }}},[_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"会员名称\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',[_vm._v(_vm._s(row.username))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"订单号\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',[_vm._v(_vm._s(row.id.substr(-10)))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createdAt\",\"label\":\"创建时间\",\"align\":\"center\",\"width\":\"150\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',[_vm._v(_vm._s(_vm._f(\"moment\")(row.createdAt,\"timezone\", \"Asia/Shanghai\", \"YYYY-MM-DD HH:mm:ss\")))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"orderRealWeight\",\"label\":\"计算重量(kg)\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',[_vm._v(_vm._s(row.orderRealWeight))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"incomePrice\",\"label\":\"实付金额(元)\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',[_vm._v(_vm._s(row.incomePrice))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"costPrice\",\"label\":\"成本金额(元)\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',[_vm._v(_vm._s(row.costPrice))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"orderStatus\",\"label\":\"订单状态\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.orderStatus === '已发货')?_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(row.orderStatus))]):_c('span',{staticClass:\"text-success\"},[_vm._v(_vm._s(row.orderStatus))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"寄出时间\",\"prop\":\"shippingTime\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',[_vm._v(_vm._s(_vm._f(\"moment\")(row.shippingTime,\"timezone\", \"Asia/Shanghai\", \"YYYY-MM-DD\")))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"寄送时效\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.status === '已寄出')?_c('span',[_vm._v(_vm._s(_vm._f(\"moment\")(row.shippingTime,\"timezone\", \"Asia/Shanghai\", \"from\", \"now\")))]):_c('span',[_vm._v(_vm._s(_vm._f(\"moment\")(row.shippingTime,\"timezone\", \"Asia/Shanghai\", \"from\", \"now\")))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"compensation\",\"label\":\"售后赔付\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',[_vm._v(_vm._s(row.compensation))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"orderProfit\",\"label\":\"每单利润率\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',[_vm._v(_vm._s(row.orderProfit))])]}}])})],1),_c('pagination',{staticClass:\"mt-5 mb-5 float-right\",attrs:{\"data\":_vm.tableData,\"pager\":\"prev, pager, next, jumper, ->, total, slot\",\"limitNumber\":\"20\"},on:{\"pagechange\":_vm.pageChange}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div>\r\n      <div\r\n        class=\"border pt-2 pb-2 pl-3\"\r\n        style=\"font-size:18px;background-color:#F0F3F4;border-radius:3px;\"\r\n      >\r\n        <span class=\"mb-3\">订单流水</span>\r\n        <div class=\"float-right mr-3\">\r\n          <el-input\r\n            v-model=\"keyWord\"\r\n            type=\"text\"\r\n            placeholder=\"搜索\"\r\n            class=\"filter-item searchInputWidth\"\r\n            prefix-icon=\"el-icon-search\"\r\n            @input=\"handleQuery\"\r\n            clearable\r\n          />\r\n        </div>\r\n        <el-popover\r\n          placement=\"bottom\"\r\n          title=\"选择导出时间\"\r\n          width=\"370\"\r\n          trigger=\"click\"\r\n          class=\"float-right mr-3\"\r\n        >\r\n          <div>\r\n            <el-date-picker\r\n              v-model=\"dateDuration\"\r\n              type=\"daterange\"\r\n              align=\"right\"\r\n              unlink-panels\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n              :picker-options=\"pickerOptions\"\r\n            >\r\n            </el-date-picker>\r\n            <el-button\r\n              :loading=\"downloadLoading\"\r\n              type=\"primary\"\r\n              @click=\"handleDownload\"\r\n              class=\"float-right mt-3 pl-4 pr-4\"\r\n            >\r\n              导出\r\n            </el-button>\r\n          </div>\r\n          <el-button icon=\"el-icon-document\" type=\"primary\" slot=\"reference\"\r\n            >Excel导出</el-button\r\n          >\r\n        </el-popover>\r\n      </div>\r\n\r\n      <div class=\"mt-5\">\r\n        <!-- <pre>{{orderList}}</pre> -->\r\n        <el-table\r\n          :data=\"tableData\"\r\n          class=\"borderRadius\"\r\n          highlight-current-row\r\n          border\r\n          :default-sort=\"{ prop: 'createdAt', order: 'descending' }\"\r\n        >\r\n          <el-table-column\r\n            prop=\"username\"\r\n            label=\"会员名称\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.username }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"id\" label=\"订单号\" align=\"center\" sortable>\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.id.substr(-10) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"createdAt\"\r\n            label=\"创建时间\"\r\n            align=\"center\"\r\n            width=\"150\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{\r\n                row.createdAt\r\n                  | moment(\"timezone\", \"Asia/Shanghai\", \"YYYY-MM-DD HH:mm:ss\")\r\n              }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"orderRealWeight\"\r\n            label=\"计算重量(kg)\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.orderRealWeight }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"incomePrice\"\r\n            label=\"实付金额(元)\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.incomePrice }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"costPrice\"\r\n            label=\"成本金额(元)\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.costPrice }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"orderStatus\"\r\n            label=\"订单状态\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span v-if=\"row.orderStatus === '已发货'\" class=\"text-danger\">{{\r\n                row.orderStatus\r\n              }}</span>\r\n              <span v-else class=\"text-success\">{{ row.orderStatus }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            label=\"寄出时间\"\r\n            prop=\"shippingTime\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{\r\n                row.shippingTime\r\n                  | moment(\"timezone\", \"Asia/Shanghai\", \"YYYY-MM-DD\")\r\n              }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"寄送时效\" align=\"center\" sortable>\r\n            <template slot-scope=\"{ row }\">\r\n              <span v-if=\"row.status === '已寄出'\">{{\r\n                row.shippingTime\r\n                  | moment(\"timezone\", \"Asia/Shanghai\", \"from\", \"now\")\r\n              }}</span>\r\n              <span v-else>{{\r\n                row.shippingTime\r\n                  | moment(\"timezone\", \"Asia/Shanghai\", \"from\", \"now\")\r\n              }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n            prop=\"compensation\"\r\n            label=\"售后赔付\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.compensation }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"orderProfit\"\r\n            label=\"每单利润率\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.orderProfit }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <!-- <el-table-column prop=\"date\" label=\"更新时间\" align=\"center\"  sortable>\r\n                        <template slot-scope=\"{row}\">\r\n                            <span>{{ row.date | moment(\"timezone\", \"Asia/Shanghai\", \"YYYY-MM-DD HH:mm:ss\") }}</span>\r\n                        </template>\r\n                    </el-table-column> -->\r\n        </el-table>\r\n        <pagination\r\n          :data=\"tableData\"\r\n          class=\"mt-5 mb-5 float-right\"\r\n          @pagechange=\"pageChange\"\r\n          pager=\"prev, pager, next, jumper, ->, total, slot\"\r\n          limitNumber=\"20\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed, ref, reactive } from \"@vue/composition-api\";\r\nimport pagination from \"../components/InfoPagination\";\r\nimport { toPercent } from \"../../../utils/function\";\r\nexport default {\r\n  components: {\r\n    pagination,\r\n  },\r\n\r\n  setup(props, { root: { $store, $moment } }) {\r\n    onMounted(() => {\r\n      $store.dispatch(\"getAllOrderForm\", {\r\n        status: \"已签收\",\r\n        page: \"0\",\r\n        size: \"20\",\r\n        status1: \"已发货\",\r\n      });\r\n    });\r\n\r\n    const orderList = computed(() => {\r\n      return $store.state.orderlist;\r\n    });\r\n\r\n    const tableData = computed(() => {\r\n      let data = [];\r\n      if (keyWord.value != \"\") {\r\n        data = returnData.value;\r\n      } else {\r\n        data = orderList.value;\r\n      }\r\n      return data.map((object) => {\r\n        let orderSizeWeight = Math.round(\r\n          (object.orderSize_length *\r\n            object.orderSize_width *\r\n            object.orderSize_height) /\r\n            5000\r\n        );\r\n        let compensation = object.compensation ? object.compensation : 0;\r\n        return {\r\n          id: object._id,\r\n          createdAt: object.createdAt,\r\n          date: object.updatedAt,\r\n          username: object.username,\r\n          incomePrice: object.incomePrice,\r\n          costPrice: object.costPrice,\r\n          compensation: object.compensation,\r\n          orderStatus: object.orderStatus,\r\n          orderRealWeight:\r\n            orderSizeWeight > object.orderWeight\r\n              ? orderSizeWeight\r\n              : object.orderWeight,\r\n          shippingTime: object.shippingTime,\r\n          orderProfit: toPercent(\r\n            object.incomePrice / (object.costPrice + compensation),\r\n            1\r\n          ),\r\n        };\r\n      });\r\n    });\r\n\r\n    const keyWord = ref(\"\");\r\n\r\n    const returnData = ref([]);\r\n\r\n    const handleQuery = () => {\r\n      let data = {\r\n        keyword: { searchString: keyWord.value },\r\n        status: \"已签收\",\r\n        page: 0,\r\n        size: 20,\r\n        status1: \"已发货\",\r\n      };\r\n      $store\r\n        .dispatch(\"searchOrders\", data)\r\n        .then((res) => {\r\n          returnData.value = res.data;\r\n        })\r\n        .catch(() => {});\r\n    };\r\n\r\n    const pageChange = (val) => {\r\n      if (keyWord.value === \"\") {\r\n        $store.dispatch(\"getAllOrderForm\", {\r\n          status: \"已签收\",\r\n          page: val - 1,\r\n          size: 20,\r\n          status1: \"已发货\",\r\n        });\r\n      } else {\r\n        $store\r\n          .dispatch(\"searchOrders\", {\r\n            keyword: { searchString: keyWord.value },\r\n            status: \"已签收\",\r\n            page: val - 1,\r\n            size: 20,\r\n            status1: \"已发货\",\r\n          })\r\n          .then((res) => {\r\n            returnData.value = res.data;\r\n          })\r\n          .catch(() => {});\r\n      }\r\n    };\r\n\r\n    const downloadLoading = ref(false);\r\n\r\n    const formatJson = (filterVal, jsonData) => {\r\n      return jsonData.map((v) =>\r\n        filterVal.map((j) => {\r\n          if (j === \"shippingDuration\") {\r\n            if (v[\"shippingTime\"]) {\r\n              return $moment(v[\"shippingTime\"])\r\n                .tz(\"Asia/Shanghai\")\r\n                .fromNow();\r\n            } else {\r\n              return \"\";\r\n            }\r\n          } else if (j == \"shippingTime\") {\r\n            if (v[j]) {\r\n              return $moment(v[j])\r\n                .tz(\"Asia/Shanghai\")\r\n                .format(\"YYYY-MM-DD HH:mm:ss\");\r\n            } else {\r\n              return \"\";\r\n            }\r\n          } else if (j == \"updatedAt\" || j == \"createdAt\") {\r\n            return $moment(v[j])\r\n              .tz(\"Asia/Shanghai\")\r\n              .format(\"YYYY-MM-DD HH:mm:ss\");\r\n          } else {\r\n            return v[j];\r\n          }\r\n        })\r\n      );\r\n    };\r\n\r\n    const orderTurnoverData = computed(() => {\r\n      return $store.state.orderTurnoverData.map((object) => {\r\n        let orderSizeWeight = Math.round(\r\n          (object.orderSize_length *\r\n            object.orderSize_width *\r\n            object.orderSize_height) /\r\n            5000\r\n        );\r\n        let compensation = object.compensation ? object.compensation : 0;\r\n        return {\r\n          id: object._id,\r\n          createdAt: object.createdAt,\r\n          date: object.updatedAt,\r\n          username: object.username,\r\n          incomePrice: object.incomePrice,\r\n          costPrice: object.costPrice,\r\n          compensation: object.compensation,\r\n          orderStatus: object.orderStatus,\r\n          orderRealWeight:\r\n            orderSizeWeight > object.orderWeight\r\n              ? orderSizeWeight\r\n              : object.orderWeight,\r\n          shippingTime: object.shippingTime,\r\n          orderProfit: toPercent(\r\n            object.incomePrice / (object.costPrice + compensation),\r\n            1\r\n          ),\r\n        };\r\n      });\r\n    });\r\n    const handleDownload = () => {\r\n      let fromDate = $moment(dateDuration.value[0])\r\n        .subtract(1, \"days\")\r\n        .format(\"YYYY-MM-DD 00:00:00\");\r\n      let toDate = $moment(dateDuration.value[1])\r\n        .add(1, \"days\")\r\n        .format(\"YYYY-MM-DD 00:00:00\");\r\n\r\n      $store\r\n        .dispatch(\"getOrderTurnover\", {\r\n          fromDate: fromDate,\r\n          toDate: toDate,\r\n        })\r\n        .then(() => {\r\n          downloadLoading.value = true;\r\n          import(\"@/components/Export2Excel\").then((excel) => {\r\n            const tHeader = [\r\n              \"会员名称\",\r\n              \"订单号\",\r\n              \"创建时间\",\r\n              \"计算重量(kg)\",\r\n              \"实付金额(元)\",\r\n              \"成本金额(元)\",\r\n              \"订单状态\",\r\n              \"寄出时间\",\r\n              \"寄送时效\",\r\n              \"售后赔付\",\r\n              \"每单利润率\",\r\n            ];\r\n            const a = [\r\n              \"username\",\r\n              \"id\",\r\n              \"createdAt\",\r\n              \"orderRealWeight\",\r\n              \"incomePrice\",\r\n              \"costPrice\",\r\n              \"orderStatus\",\r\n              \"shippingTime\",\r\n              \"shippingDuration\",\r\n              \"compensation\",\r\n              \"orderProfit\",\r\n            ];\r\n            const data = formatJson(a, orderTurnoverData.value);\r\n            excel.export_json_to_excel({\r\n              header: tHeader,\r\n              data,\r\n              filename:\r\n                $moment(fromDate)\r\n                  .add(1, \"days\")\r\n                  .format(\"YYYY/MM/DD\") +\r\n                \"-\" +\r\n                $moment(toDate)\r\n                  .subtract(1, \"days\")\r\n                  .format(\"MM/DD\") +\r\n                \"- 订单流水\",\r\n              autoWidth: true,\r\n              bookType: \"xlsx\",\r\n            });\r\n            downloadLoading.value = false;\r\n          });\r\n        });\r\n    };\r\n\r\n    const dateDuration = ref(\"\");\r\n    const pickerOptions = reactive({\r\n      shortcuts: [\r\n        {\r\n          text: \"最近一周\",\r\n          onClick(picker) {\r\n            const end = new Date();\r\n            const start = new Date();\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n            picker.$emit(\"pick\", [start, end]);\r\n          },\r\n        },\r\n        {\r\n          text: \"最近一个月\",\r\n          onClick(picker) {\r\n            const end = new Date();\r\n            const start = new Date();\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\r\n            picker.$emit(\"pick\", [start, end]);\r\n          },\r\n        },\r\n        {\r\n          text: \"最近三个月\",\r\n          onClick(picker) {\r\n            const end = new Date();\r\n            const start = new Date();\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\r\n            picker.$emit(\"pick\", [start, end]);\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    return {\r\n      keyWord,\r\n      handleQuery,\r\n      pageChange,\r\n\r\n      orderList,\r\n      tableData,\r\n\r\n      downloadLoading,\r\n      handleDownload,\r\n      pickerOptions,\r\n      dateDuration,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-breadcrumb-outer {\r\n  height: 48px;\r\n  font-size: 15px;\r\n  background-color: #f0f3f4;\r\n  border-radius: 3px;\r\n}\r\n.bottom-margin {\r\n  margin-bottom: 120px;\r\n}\r\n.dialog-notice {\r\n  color: #f56c6c;\r\n  font-weight: 800;\r\n  margin-left: 42px;\r\n}\r\n.input-width {\r\n  width: 80px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderTurnover.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderTurnover.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./orderTurnover.vue?vue&type=template&id=6098e548&scoped=true&\"\nimport script from \"./orderTurnover.vue?vue&type=script&lang=js&\"\nexport * from \"./orderTurnover.vue?vue&type=script&lang=js&\"\nimport style0 from \"./orderTurnover.vue?vue&type=style&index=0&id=6098e548&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6098e548\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderTurnover.vue?vue&type=style&index=0&id=6098e548&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderTurnover.vue?vue&type=style&index=0&id=6098e548&lang=scss&scoped=true&\""],"sourceRoot":""}